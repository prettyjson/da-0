<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VETNET_TERMINAL_v2.1.3</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.0.0/dist/tesseract.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', 'Courier New', monospace;
            background: #0a0a0a;
            color: #00ff41;
            min-height: 100vh;
            overflow-x: auto;
            font-size: 12px;
            line-height: 1.4;
        }

        /* Auth Screen Styles */
        .auth-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        .auth-box {
            border: 2px solid #00ff41;
            background: rgba(0, 0, 0, 0.95);
            padding: 40px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.3);
        }

        .auth-logo {
            text-align: center;
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #00ff41;
        }

        .auth-subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 11px;
        }

        .auth-form {
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #00ff41;
            font-size: 11px;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            background: transparent;
            border: 1px solid #004d15;
            color: #00ff41;
            font-family: inherit;
            font-size: 12px;
        }

        .form-input:focus {
            outline: none;
            border-color: #00ff41;
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.2);
        }

        .btn-primary {
            width: 100%;
            padding: 12px;
            background: transparent;
            border: 2px solid #00ff41;
            color: #00ff41;
            font-family: inherit;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary:hover {
            background: rgba(0, 255, 65, 0.1);
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.3);
        }

        .btn-secondary {
            width: 100%;
            padding: 12px;
            background: transparent;
            border: 1px solid #004d15;
            color: #666;
            font-family: inherit;
            font-size: 11px;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s;
        }

        .btn-secondary:hover {
            border-color: #00ff41;
            color: #00ff41;
        }

        .auth-divider {
            text-align: center;
            margin: 20px 0;
            color: #666;
            font-size: 11px;
        }

        /* Verification Flow Styles */
        .verification-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .verification-header {
            border: 2px solid #00ff41;
            padding: 20px;
            margin-bottom: 30px;
            background: rgba(0, 255, 65, 0.02);
        }

        .verification-step {
            border: 1px solid #00ff41;
            padding: 30px;
            margin-bottom: 30px;
            background: rgba(0, 255, 65, 0.02);
            display: none;
        }

        .verification-step.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #00ff41;
        }

        .step-description {
            color: #888;
            margin-bottom: 20px;
            font-size: 11px;
            line-height: 1.6;
        }

        .file-upload {
            border: 2px dashed #004d15;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .file-upload:hover {
            border-color: #00ff41;
            background: rgba(0, 255, 65, 0.05);
        }

        .file-upload.has-file {
            border-color: #00ff41;
            background: rgba(0, 255, 65, 0.1);
        }

        .upload-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .upload-text {
            color: #00ff41;
            margin-bottom: 5px;
        }

        .upload-subtext {
            color: #666;
            font-size: 10px;
        }

        .webcam-container {
            border: 2px solid #00ff41;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }

        #webcam-video {
            width: 100%;
            max-width: 500px;
            border: 1px solid #004d15;
        }

        .verification-status {
            margin-top: 20px;
            padding: 15px;
            border-left: 3px solid #00ff41;
            background: rgba(0, 255, 65, 0.05);
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 11px;
        }

        .status-item:last-child {
            margin-bottom: 0;
        }

        .status-success {
            color: #00ff41;
        }

        .status-error {
            color: #ff0000;
        }

        .status-pending {
            color: #ffaa00;
        }

        .progress-bar-container {
            width: 100%;
            height: 20px;
            background: #004d15;
            border: 1px solid #00ff41;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff41, #ffaa00);
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }

        .processing-animation {
            text-align: center;
            padding: 20px;
            color: #00ff41;
        }

        .spinner {
            display: inline-block;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { content: '|'; }
            25% { content: '/'; }
            50% { content: '‚Äî'; }
            75% { content: '\\'; }
            100% { content: '|'; }
        }

        .spinner::after {
            content: '|';
        }

        /* Main App Styles */
        .terminal-container {
            padding: 20px;
            max-width: none;
            display: none;
        }

        .terminal-container.active {
            display: block;
        }

        .terminal-header {
            border: 1px solid #00ff41;
            padding: 10px;
            margin-bottom: 20px;
            background: rgba(0, 255, 65, 0.02);
        }

        .header-line {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .blink {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .stats-section {
            border: 1px solid #00ff41;
            padding: 15px;
            background: rgba(0, 255, 65, 0.02);
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dotted #004d15;
        }

        .stat-row:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: #888;
        }

        .stat-value {
            color: #00ff41;
            font-weight: bold;
        }

        .live-stages {
            border: 1px solid #00ff41;
            padding: 15px;
            background: rgba(0, 255, 65, 0.02);
        }

        .stage-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px dotted #004d15;
            cursor: pointer;
        }

        .stage-item:hover {
            background: rgba(0, 255, 65, 0.05);
            padding-left: 5px;
            transition: all 0.2s;
        }

        .stage-item:last-child {
            border-bottom: none;
        }

        .live-indicator {
            color: #ff0000;
            margin-right: 10px;
            font-weight: bold;
        }

        .stage-listeners {
            margin-left: auto;
            color: #888;
        }

        .members-table {
            border: 1px solid #00ff41;
            padding: 15px;
            margin-bottom: 20px;
            background: rgba(0, 255, 65, 0.02);
        }

        .table-row {
            display: grid;
            grid-template-columns: 50px 200px 150px 100px 100px;
            padding: 8px 0;
            border-bottom: 1px dotted #004d15;
        }

        .table-row:first-child {
            font-weight: bold;
            color: #00ff41;
            border-bottom: 1px solid #00ff41;
        }

        .table-row:last-child {
            border-bottom: none;
        }

        .table-cell {
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .rank {
            color: #ffaa00;
        }

        .percentage {
            color: #00ff41;
            font-weight: bold;
        }

        .treasury-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .treasury-box {
            border: 1px solid #00ff41;
            padding: 15px;
            background: rgba(0, 255, 65, 0.02);
        }

        .big-number {
            font-size: 24px;
            font-weight: bold;
            color: #00ff41;
            margin: 10px 0;
        }

        .chart-container {
            border: 1px solid #00ff41;
            padding: 15px;
            margin-bottom: 20px;
            background: rgba(0, 255, 65, 0.02);
            min-height: 300px;
        }

        .ascii-chart {
            font-family: 'JetBrains Mono', monospace;
            white-space: pre;
            color: #00ff41;
            font-size: 10px;
        }

        .votes-section {
            border: 1px solid #00ff41;
            padding: 15px;
            background: rgba(0, 255, 65, 0.02);
            margin-bottom: 20px;
        }

        .vote-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dotted #004d15;
            cursor: pointer;
        }

        .vote-item:hover {
            background: rgba(0, 255, 65, 0.05);
            padding: 5px;
            transition: all 0.2s;
        }

        .vote-item:last-child {
            border-bottom: none;
        }

        .vote-title {
            color: #00ff41;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .vote-bar {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }

        .progress-bar {
            width: 200px;
            height: 10px;
            background: #004d15;
            margin-right: 10px;
            position: relative;
            border: 1px solid #00ff41;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff41, #ffaa00);
            transition: width 0.5s;
        }

        .nav-tabs {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            border-bottom: 1px solid #00ff41;
            padding-bottom: 10px;
        }

        .nav-tab {
            cursor: pointer;
            padding: 5px 15px;
            background: none;
            border: 1px solid #004d15;
            color: #888;
            font-family: inherit;
            font-size: inherit;
            transition: all 0.2s;
        }

        .nav-tab:hover {
            border-color: #00ff41;
            color: #00ff41;
        }

        .nav-tab.active {
            background: rgba(0, 255, 65, 0.1);
            border-color: #00ff41;
            color: #00ff41;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .chat-terminal {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 20px;
            height: 400px;
        }

        .chat-list {
            border: 1px solid #00ff41;
            padding: 10px;
            background: rgba(0, 255, 65, 0.02);
            overflow-y: auto;
        }

        .chat-window {
            border: 1px solid #00ff41;
            display: flex;
            flex-direction: column;
            background: rgba(0, 255, 65, 0.02);
        }

        .chat-header {
            padding: 10px;
            border-bottom: 1px solid #00ff41;
            font-weight: bold;
            background: rgba(0, 255, 65, 0.05);
        }

        .chat-messages {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
            font-size: 11px;
        }

        .message {
            margin-bottom: 10px;
            padding: 5px 0;
        }

        .message-header {
            color: #ffaa00;
            font-weight: bold;
        }

        .timestamp {
            color: #666;
            font-size: 10px;
        }

        .chat-input {
            padding: 10px;
            border-top: 1px solid #00ff41;
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            background: transparent;
            border: 1px solid #004d15;
            color: #00ff41;
            padding: 5px 10px;
            font-family: inherit;
            font-size: inherit;
        }

        .chat-input input:focus {
            outline: none;
            border-color: #00ff41;
        }

        .chat-input button {
            background: transparent;
            border: 1px solid #00ff41;
            color: #00ff41;
            padding: 5px 15px;
            cursor: pointer;
            font-family: inherit;
            font-size: inherit;
        }

        .chat-input button:hover {
            background: rgba(0, 255, 65, 0.1);
        }

        .chat-room {
            display: flex;
            align-items: center;
            padding: 8px;
            cursor: pointer;
            border-bottom: 1px dotted #004d15;
        }

        .chat-room:hover, .chat-room.active {
            background: rgba(0, 255, 65, 0.05);
        }

        .unread-count {
            margin-left: auto;
            color: #ff0000;
            font-weight: bold;
        }

        .profile-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .profile-popup.show {
            display: flex;
        }

        .profile-content {
            border: 2px solid #00ff41;
            background: #0a0a0a;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            position: relative;
        }

        .profile-close {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: #00ff41;
            font-size: 20px;
            cursor: pointer;
            font-family: inherit;
        }

        .profile-info {
            margin-bottom: 20px;
        }

        .profile-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 5px 0;
            border-bottom: 1px dotted #004d15;
        }

        .badges-container {
            margin: 15px 0;
        }

        .badge {
            display: inline-block;
            background: rgba(255, 170, 0, 0.2);
            border: 1px solid #ffaa00;
            color: #ffaa00;
            padding: 2px 8px;
            margin: 2px;
            font-size: 10px;
        }

        .system-info {
            position: fixed;
            bottom: 10px;
            right: 10px;
            font-size: 10px;
            color: #666;
            font-family: inherit;
        }

        .error-text {
            color: #ff0000;
        }

        .warning-text {
            color: #ffaa00;
        }

        .hidden {
            display: none !important;
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 255, 65, 0.95);
            color: #0a0a0a;
            padding: 12px 24px;
            border: 2px solid #00ff41;
            font-weight: bold;
            z-index: 2000;
            animation: toastIn 0.3s ease;
        }

        @keyframes toastIn {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        /* Invite Modal */
        .invite-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #004d15;
        }

        .invite-code {
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid #00ff41;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            text-align: center;
            cursor: pointer;
        }

        .invite-code:hover {
            background: rgba(0, 255, 65, 0.2);
        }

        .invite-stats {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 11px;
        }

        .referral-badge {
            display: inline-block;
            background: rgba(0, 255, 65, 0.2);
            border: 1px solid #00ff41;
            color: #00ff41;
            padding: 2px 8px;
            margin: 2px;
            font-size: 10px;
        }

        /* Net Room Styles */
        .net-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            z-index: 1000;
            overflow-y: auto;
        }

        .net-popup.show {
            display: flex;
            flex-direction: column;
        }

        .net-header {
            border-bottom: 2px solid #00ff41;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 255, 65, 0.05);
        }

        .net-title {
            font-size: 16px;
            font-weight: bold;
            color: #00ff41;
        }

        .net-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .net-live-badge {
            background: #ff0000;
            color: #fff;
            padding: 2px 8px;
            font-size: 10px;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .net-body {
            display: grid;
            grid-template-columns: 1fr 300px;
            flex: 1;
            min-height: 0;
        }

        .net-stage {
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .speakers-section {
            margin-bottom: 20px;
        }

        .speakers-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }

        .speaker-card {
            border: 1px solid #00ff41;
            padding: 15px;
            text-align: center;
            min-width: 100px;
            background: rgba(0, 255, 65, 0.05);
            position: relative;
        }

        .speaker-card.host {
            border-color: #ffaa00;
            background: rgba(255, 170, 0, 0.1);
        }

        .speaker-card.co-host {
            border-color: #00aaff;
            background: rgba(0, 170, 255, 0.1);
        }

        .speaker-card.speaking {
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.5);
            animation: speaking 1s infinite;
        }

        @keyframes speaking {
            0%, 100% { box-shadow: 0 0 10px rgba(0, 255, 65, 0.3); }
            50% { box-shadow: 0 0 20px rgba(0, 255, 65, 0.6); }
        }

        .speaker-avatar {
            width: 50px;
            height: 50px;
            border: 2px solid #00ff41;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 8px;
            font-size: 20px;
        }

        .speaker-name {
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .speaker-role {
            font-size: 9px;
            color: #888;
        }

        .speaker-muted {
            position: absolute;
            top: 5px;
            right: 5px;
            color: #ff0000;
            font-size: 12px;
        }

        .listeners-section {
            border-top: 1px solid #004d15;
            padding-top: 15px;
            flex: 1;
        }

        .listeners-count {
            color: #888;
            font-size: 11px;
            margin-bottom: 10px;
        }

        .listeners-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .listener-badge {
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid #004d15;
            padding: 4px 10px;
            font-size: 10px;
        }

        .net-sidebar {
            border-left: 1px solid #00ff41;
            display: flex;
            flex-direction: column;
            background: rgba(0, 255, 65, 0.02);
        }

        .net-chat-header {
            padding: 10px 15px;
            border-bottom: 1px solid #004d15;
            font-weight: bold;
            font-size: 11px;
        }

        .net-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 10px 15px;
            font-size: 10px;
        }

        .net-chat-input {
            padding: 10px 15px;
            border-top: 1px solid #004d15;
            display: flex;
            gap: 8px;
        }

        .net-chat-input input {
            flex: 1;
            background: transparent;
            border: 1px solid #004d15;
            color: #00ff41;
            padding: 8px;
            font-family: inherit;
            font-size: 10px;
        }

        .net-chat-input button {
            background: transparent;
            border: 1px solid #00ff41;
            color: #00ff41;
            padding: 8px 12px;
            cursor: pointer;
            font-family: inherit;
            font-size: 10px;
        }

        .net-controls {
            padding: 15px 20px;
            border-top: 1px solid #00ff41;
            display: flex;
            justify-content: center;
            gap: 15px;
            background: rgba(0, 255, 65, 0.02);
        }

        .net-control-btn {
            background: transparent;
            border: 2px solid #00ff41;
            color: #00ff41;
            padding: 12px 20px;
            cursor: pointer;
            font-family: inherit;
            font-size: 11px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .net-control-btn:hover {
            background: rgba(0, 255, 65, 0.1);
        }

        .net-control-btn.danger {
            border-color: #ff0000;
            color: #ff0000;
        }

        .net-control-btn.danger:hover {
            background: rgba(255, 0, 0, 0.1);
        }

        .net-control-btn.request {
            border-color: #ffaa00;
            color: #ffaa00;
        }

        .net-control-btn.request:hover {
            background: rgba(255, 170, 0, 0.1);
        }

        .net-control-btn.mute {
            border-color: #ff0000;
            color: #ff0000;
        }

        .net-control-btn.unmute {
            border-color: #00ff41;
            color: #00ff41;
        }

        .requests-panel {
            border: 1px solid #ffaa00;
            padding: 15px;
            margin-top: 15px;
            background: rgba(255, 170, 0, 0.05);
        }

        .request-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px dotted #004d15;
        }

        .request-item:last-child {
            border-bottom: none;
        }

        .request-actions {
            display: flex;
            gap: 8px;
        }

        .request-btn {
            background: transparent;
            border: 1px solid;
            padding: 4px 10px;
            font-size: 9px;
            cursor: pointer;
            font-family: inherit;
        }

        .request-btn.approve {
            border-color: #00ff41;
            color: #00ff41;
        }

        .request-btn.deny {
            border-color: #ff0000;
            color: #ff0000;
        }

        /* Create Net Modal */
        .create-net-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1001;
        }

        .create-net-modal.show {
            display: flex;
        }

        .create-net-content {
            border: 2px solid #00ff41;
            background: #0a0a0a;
            padding: 30px;
            max-width: 500px;
            width: 90%;
        }

        /* Nets listing styles */
        .nets-list {
            border: 1px solid #00ff41;
            padding: 15px;
            background: rgba(0, 255, 65, 0.02);
        }

        .net-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-bottom: 1px dotted #004d15;
            cursor: pointer;
            transition: all 0.2s;
        }

        .net-item:hover {
            background: rgba(0, 255, 65, 0.05);
            padding-left: 15px;
        }

        .net-item:last-child {
            border-bottom: none;
        }

        .net-item-live {
            color: #ff0000;
            margin-right: 10px;
            font-weight: bold;
        }

        .net-item-info {
            flex: 1;
        }

        .net-item-name {
            font-weight: bold;
            margin-bottom: 4px;
        }

        .net-item-host {
            font-size: 10px;
            color: #888;
        }

        .net-item-stats {
            text-align: right;
            font-size: 10px;
            color: #888;
        }

        .net-item-count {
            font-weight: bold;
            color: #00ff41;
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            body {
                font-size: 11px;
                overflow-x: hidden;
            }

            .auth-box {
                padding: 20px;
                margin: 10px;
            }

            .auth-logo {
                font-size: 24px;
            }

            .terminal-container {
                padding: 10px;
            }

            .terminal-header {
                padding: 8px;
            }

            .header-line {
                flex-wrap: wrap;
                gap: 5px;
                font-size: 9px;
            }

            .header-line span {
                flex: 1 1 auto;
            }

            /* Stack main grid on mobile */
            .main-grid {
                grid-template-columns: 1fr;
            }

            /* Stack treasury grid on mobile */
            .treasury-grid {
                grid-template-columns: 1fr;
            }

            /* Horizontal scroll for tables */
            .members-table {
                overflow-x: auto;
            }

            .table-row {
                grid-template-columns: 40px 120px 80px 60px 50px;
                font-size: 10px;
                min-width: 350px;
            }

            /* Navigation tabs - scrollable */
            .nav-tabs {
                overflow-x: auto;
                gap: 10px;
                padding-bottom: 15px;
                flex-wrap: nowrap;
            }

            .nav-tab {
                padding: 8px 12px;
                font-size: 10px;
                white-space: nowrap;
                flex-shrink: 0;
            }

            /* Chat terminal - stack on mobile */
            .chat-terminal {
                grid-template-columns: 1fr;
                height: auto;
            }

            .chat-list {
                max-height: 150px;
                overflow-y: auto;
            }

            .chat-window {
                height: 350px;
            }

            .chat-messages {
                font-size: 10px;
            }

            /* Vote items */
            .vote-bar {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }

            .progress-bar {
                width: 100%;
            }

            .vote-title {
                font-size: 11px;
            }

            /* Profile popup */
            .profile-content {
                padding: 15px;
                max-height: 90vh;
                overflow-y: auto;
            }

            .profile-row {
                flex-direction: column;
                gap: 2px;
            }

            .profile-row .stat-label {
                font-size: 9px;
            }

            /* ASCII chart - smaller font */
            .ascii-chart {
                font-size: 7px;
                overflow-x: auto;
            }

            .chart-container {
                min-height: auto;
                overflow-x: auto;
            }

            /* Big numbers smaller on mobile */
            .big-number {
                font-size: 18px;
            }

            /* System info repositioned */
            .system-info {
                font-size: 8px;
                bottom: 5px;
                right: 5px;
                left: 5px;
                text-align: center;
            }

            /* Verification steps */
            .verification-step {
                padding: 15px;
            }

            .step-title {
                font-size: 14px;
            }

            .file-upload {
                padding: 20px;
            }

            .upload-icon {
                font-size: 32px;
            }

            /* Stages */
            .live-stages {
                font-size: 11px;
            }

            .stage-item {
                padding: 10px 0;
            }

            /* Net popup mobile */
            .net-body {
                grid-template-columns: 1fr;
            }

            .net-sidebar {
                border-left: none;
                border-top: 1px solid #00ff41;
                max-height: 200px;
            }

            .net-controls {
                flex-wrap: wrap;
            }

            .net-control-btn {
                padding: 10px 15px;
                font-size: 10px;
            }

            .speaker-card {
                min-width: 80px;
                padding: 10px;
            }

            .speaker-avatar {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .speaker-name {
                font-size: 9px;
            }
        }

        @media (max-width: 480px) {
            .auth-logo {
                font-size: 20px;
            }

            .nav-tabs {
                gap: 5px;
            }

            .nav-tab {
                padding: 6px 8px;
                font-size: 9px;
            }

            .table-row {
                grid-template-columns: 35px 100px 70px 50px 40px;
                font-size: 9px;
            }

            .ascii-chart {
                display: none;
            }

            .chart-container::after {
                content: '[Chart optimized for desktop view]';
                color: #666;
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Auth Screen -->
    <div id="auth-screen" class="auth-container">
        <div class="auth-box">
            <div class="auth-logo">üéñÔ∏è VETNET</div>
            <div class="auth-subtitle">CREDENTIALED_VETERANS_NETWORK_v2.1.3</div>
            
            <!-- Login Form -->
            <div id="login-form" class="auth-form">
                <div class="form-group">
                    <label class="form-label">USERNAME:</label>
                    <input type="text" class="form-input" id="login-username" placeholder="SGT_MARTINEZ_J" />
                </div>
                <div class="form-group">
                    <label class="form-label">PASSWORD:</label>
                    <input type="password" class="form-input" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
                </div>
                <button class="btn-primary" onclick="handleLogin()">LOGIN</button>
                <div class="auth-divider">‚Äî OR ‚Äî</div>
                <button class="btn-secondary" onclick="showSignup()">CREATE_NEW_ACCOUNT</button>
            </div>
            
            <!-- Signup Form -->
            <div id="signup-form" class="auth-form hidden">
                <div class="form-group">
                    <label class="form-label">EMAIL:</label>
                    <input type="email" class="form-input" id="signup-email" placeholder="your.email@example.com" />
                </div>
                <div class="form-group">
                    <label class="form-label">USERNAME:</label>
                    <input type="text" class="form-input" id="signup-username" placeholder="SGT_LASTNAME_F" />
                </div>
                <div class="form-group">
                    <label class="form-label">PASSWORD:</label>
                    <input type="password" class="form-input" id="signup-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
                </div>
                <button class="btn-primary" onclick="startVerification()">BEGIN_VERIFICATION</button>
                <div class="auth-divider">‚Äî OR ‚Äî</div>
                <button class="btn-secondary" onclick="showLogin()">BACK_TO_LOGIN</button>
            </div>
            
            <div style="margin-top: 30px; text-align: center; font-size: 10px; color: #666;">
                RESTRICTED_ACCESS: OFFICERS_ONLY<br/>
                VERIFICATION_REQUIRED: DD214_AUTHENTICATION
            </div>
        </div>
    </div>

    <!-- Verification Flow -->
    <div id="verification-screen" class="verification-container hidden">
        <div class="verification-header">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span style="font-weight: bold;">OFFICER_VERIFICATION_PROTOCOL</span>
                <span id="verification-progress">STEP 1/4</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar-fill" id="progress-fill" style="width: 25%;">25%</div>
            </div>
        </div>

        <!-- Step 1: DD-214 Upload -->
        <div id="step-1" class="verification-step active">
            <div class="step-title">STEP 1: UPLOAD DD-214</div>
            <div class="step-description">
                Upload your DD-214 form (Certificate of Release or Discharge from Active Duty).<br/>
                We will verify your officer rank and service details.<br/>
                <span class="warning-text">NOTE: This file is processed locally in your browser and never stored on our servers.</span>
            </div>
            
            <div class="file-upload" id="dd214-upload-zone" onclick="document.getElementById('dd214-file').click()">
                <div class="upload-icon">üìÑ</div>
                <div class="upload-text">CLICK_TO_UPLOAD_DD214</div>
                <div class="upload-subtext">Supported: PDF, JPG, PNG (Max 10MB)</div>
            </div>
            <input type="file" id="dd214-file" accept=".pdf,.jpg,.jpeg,.png" style="display: none;" onchange="handleDD214Upload(event)" />
            
            <div id="dd214-status" class="verification-status hidden">
                <div class="status-item">
                    <span>FILE_UPLOADED:</span>
                    <span class="status-pending" id="dd214-file-status">PROCESSING...</span>
                </div>
                <div class="status-item">
                    <span>OCR_EXTRACTION:</span>
                    <span class="status-pending" id="dd214-ocr-status">PENDING</span>
                </div>
                <div class="status-item">
                    <span>RANK_VERIFIED:</span>
                    <span class="status-pending" id="dd214-rank-status">PENDING</span>
                </div>
                <div class="status-item">
                    <span>DISCHARGE_STATUS:</span>
                    <span class="status-pending" id="dd214-discharge-status">PENDING</span>
                </div>
            </div>
            
            <button class="btn-primary hidden" id="step-1-continue" onclick="goToStep(2)">CONTINUE_TO_STEP_2 >></button>
        </div>

        <!-- Step 2: Driver's License Upload -->
        <div id="step-2" class="verification-step">
            <div class="step-title">STEP 2: UPLOAD DRIVER'S LICENSE</div>
            <div class="step-description">
                Upload a photo of your driver's license.<br/>
                We will match the name on your DD-214 with your driver's license.<br/>
                <span class="warning-text">NOTE: This file is processed locally and immediately deleted after verification.</span>
            </div>
            
            <div class="file-upload" id="dl-upload-zone" onclick="document.getElementById('dl-file').click()">
                <div class="upload-icon">ü™™</div>
                <div class="upload-text">CLICK_TO_UPLOAD_DRIVERS_LICENSE</div>
                <div class="upload-subtext">Supported: JPG, PNG (Max 5MB)</div>
            </div>
            <input type="file" id="dl-file" accept=".jpg,.jpeg,.png" style="display: none;" onchange="handleDLUpload(event)" />
            
            <div id="dl-status" class="verification-status hidden">
                <div class="status-item">
                    <span>FILE_UPLOADED:</span>
                    <span class="status-pending" id="dl-file-status">PROCESSING...</span>
                </div>
                <div class="status-item">
                    <span>NAME_EXTRACTION:</span>
                    <span class="status-pending" id="dl-name-status">PENDING</span>
                </div>
                <div class="status-item">
                    <span>NAME_MATCH:</span>
                    <span class="status-pending" id="dl-match-status">PENDING</span>
                </div>
                <div class="status-item">
                    <span>PHOTO_EXTRACTED:</span>
                    <span class="status-pending" id="dl-photo-status">PENDING</span>
                </div>
            </div>
            
            <button class="btn-primary hidden" id="step-2-continue" onclick="goToStep(3)">CONTINUE_TO_STEP_3 >></button>
        </div>

        <!-- Step 3: Face Verification -->
        <div id="step-3" class="verification-step">
            <div class="step-title">STEP 3: LIVE FACE VERIFICATION</div>
            <div class="step-description">
                We need to verify that you are the person on the driver's license.<br/>
                Please allow camera access and follow the on-screen instructions.<br/>
                <span class="warning-text">NOTE: No images are stored. Verification happens entirely in your browser.</span>
            </div>
            
            <div class="webcam-container">
                <video id="webcam-video" autoplay playsinline></video>
                <div id="liveness-instructions" style="margin-top: 15px; color: #ffaa00;">
                    WAITING_FOR_CAMERA_ACCESS...
                </div>
            </div>
            
            <div id="face-status" class="verification-status hidden">
                <div class="status-item">
                    <span>CAMERA_ACCESS:</span>
                    <span class="status-pending" id="face-camera-status">PENDING</span>
                </div>
                <div class="status-item">
                    <span>FACE_DETECTED:</span>
                    <span class="status-pending" id="face-detect-status">PENDING</span>
                </div>
                <div class="status-item">
                    <span>LIVENESS_CHECK:</span>
                    <span class="status-pending" id="face-liveness-status">PENDING</span>
                </div>
                <div class="status-item">
                    <span>FACE_MATCH:</span>
                    <span class="status-pending" id="face-match-status">PENDING</span>
                </div>
            </div>
            
            <button class="btn-primary hidden" id="start-face-capture" onclick="startFaceVerification()">START_VERIFICATION</button>
            <button class="btn-primary hidden" id="step-3-continue" onclick="goToStep(4)">CONTINUE_TO_FINAL_STEP >></button>
        </div>

        <!-- Step 4: Completion -->
        <div id="step-4" class="verification-step">
            <div class="step-title">STEP 4: VERIFICATION COMPLETE</div>
            <div class="step-description">
                Congratulations! Your officer credentials have been successfully verified.
            </div>
            
            <div class="verification-status">
                <div class="status-item">
                    <span>RANK_VERIFIED:</span>
                    <span class="status-success" id="final-rank">O-3 CAPTAIN</span>
                </div>
                <div class="status-item">
                    <span>NAME_VERIFIED:</span>
                    <span class="status-success">MATCH_CONFIRMED</span>
                </div>
                <div class="status-item">
                    <span>IDENTITY_VERIFIED:</span>
                    <span class="status-success">BIOMETRIC_MATCH</span>
                </div>
                <div class="status-item">
                    <span>DISCHARGE_STATUS:</span>
                    <span class="status-success">HONORABLE</span>
                </div>
                <div class="status-item">
                    <span>BADGES_EXTRACTED:</span>
                    <span class="status-success" id="final-badges">AIRBORNE, RANGER, CIB</span>
                </div>
                <div class="status-item">
                    <span>UNITS_VERIFIED:</span>
                    <span class="status-success" id="final-units">82ND_AIRBORNE</span>
                </div>
            </div>
            
            <div style="margin: 20px 0; padding: 15px; border: 1px solid #ffaa00; background: rgba(255, 170, 0, 0.05);">
                <div style="color: #ffaa00; font-weight: bold; margin-bottom: 10px;">PRIVACY_NOTICE:</div>
                <div style="color: #888; font-size: 10px; line-height: 1.6;">
                    ‚úì All biometric data has been deleted from your device<br/>
                    ‚úì No personal information has been stored on our servers<br/>
                    ‚úì Only your rank, badges, and verification proof are retained<br/>
                    ‚úì Your identity remains anonymous within the network
                </div>
            </div>
            
            <button class="btn-primary" onclick="completeVerification()">ENTER_NETWORK >></button>
        </div>
    </div>

    <!-- Main Application (existing terminal interface) -->
    <div id="main-app" class="terminal-container">
        <!-- Terminal Header -->
        <div class="terminal-header">
            <div class="header-line">
                <span>VETNET_SECURE_TERMINAL_v2.1.3</span>
                <span>USER: <span id="current-user">SGT_MARTINEZ_J</span></span>
                <span>CLEARANCE: <span class="warning-text">VERIFIED</span></span>
                <span class="blink">‚ñà</span>
            </div>
            <div class="header-line">
                <span>NETWORK STATUS: <span class="error-text">LIVE</span></span>
                <span>NODES: 1,729</span>
                <span>UPTIME: 99.97%</span>
                <span>LAST_LOGIN: 11AUG25_0847Z</span>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showSection('overview')">OVERVIEW</button>
            <button class="nav-tab" onclick="showSection('treasury')">TREASURY</button>
            <button class="nav-tab" onclick="showSection('members')">MEMBERS</button>
            <button class="nav-tab" onclick="showSection('votes')">VOTES</button>
            <button class="nav-tab" onclick="showSection('nets')">NETS</button>
            <button class="nav-tab" onclick="showSection('comms')">COMMS</button>
            <button class="nav-tab" style="margin-left: auto; border-color: #ff0000; color: #ff0000;" onclick="logout()">LOGOUT</button>
        </div>

        <!-- Overview Section -->
        <div id="overview" class="section active">
            <div class="main-grid">
                <!-- Network Stats -->
                <div class="stats-section">
                    <div class="header-line" style="margin-bottom: 15px;">
                        <span style="font-weight: bold;">NETWORK_STATISTICS</span>
                        <span onclick="showProfile()" style="cursor: pointer; color: #ffaa00;">PROFILE_DETAILS >></span>
                    </div>
                    
                    <div class="stat-row">
                        <span class="stat-label">TOTAL_MEMBERS:</span>
                        <span class="stat-value">1,729,314</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">ANNUAL_INCOME:</span>
                        <span class="stat-value">$157,651,814,346</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">ACTIVE_NODES:</span>
                        <span class="stat-value">136,794,270</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">TREASURY_BAL:</span>
                        <span class="stat-value">$24,891,203</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">YOUR_STAKE:</span>
                        <span class="stat-value percentage">2.3%</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">LAST_DIVIDEND:</span>
                        <span class="stat-value">$847.12</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">STATUS:</span>
                        <span class="stat-value error-text">AUTHENTICATED</span>
                    </div>
                </div>

                <!-- Live Stages -->
                <div class="live-stages">
                    <div style="font-weight: bold; margin-bottom: 15px; color: #00ff41;">LIVE_VOICE_CHANNELS</div>
                    
                    <div class="stage-item" onclick="joinStage('leadership')">
                        <span class="live-indicator">‚óè</span>
                        <span>MILITARY_LEADERSHIP</span>
                        <span class="stage-listeners">596</span>
                    </div>
                    
                    <div class="stage-item" onclick="joinStage('friday')">
                        <span class="live-indicator">‚óè</span>
                        <span>FRIDAY_DEBRIEF</span>
                        <span class="stage-listeners">218</span>
                    </div>
                    
                    <div class="stage-item" onclick="joinStage('welcome')">
                        <span style="margin-right: 10px; color: #666;">‚óã</span>
                        <span style="color: #888;">WELCOME_LOUNGE</span>
                        <span class="stage-listeners" style="color: #666;">38</span>
                    </div>
                    
                    <div class="stage-item" onclick="joinStage('nco')">
                        <span style="margin-right: 10px; color: #666;">‚óã</span>
                        <span style="color: #888;">NCO_CLUB</span>
                        <span class="stage-listeners" style="color: #666;">--</span>
                    </div>
                    
                    <div style="margin-top: 15px; font-size: 10px; color: #666;">
                        >> JOIN_STAGE [STAGE_NAME]<br/>
                        >> CREATE_STAGE --private
                    </div>
                </div>
            </div>

            <!-- Top Members Leaderboard -->
            <div class="members-table">
                <div style="font-weight: bold; margin-bottom: 15px;">TOP_STAKEHOLDERS_LEADERBOARD</div>
                <div class="table-row">
                    <div class="table-cell">RANK</div>
                    <div class="table-cell">CALLSIGN</div>
                    <div class="table-cell">UNIT</div>
                    <div class="table-cell">STAKE%</div>
                    <div class="table-cell">STATUS</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">001</div>
                    <div class="table-cell">COL_HAYES_R</div>
                    <div class="table-cell">10TH_MTN</div>
                    <div class="table-cell percentage">8.7%</div>
                    <div class="table-cell error-text">‚óè</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">002</div>
                    <div class="table-cell">MAJ_CHEN_L</div>
                    <div class="table-cell">RANGER</div>
                    <div class="table-cell percentage">7.2%</div>
                    <div class="table-cell error-text">‚óè</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">003</div>
                    <div class="table-cell">CSGT_RODRIGUEZ</div>
                    <div class="table-cell">MARSOC</div>
                    <div class="table-cell percentage">6.8%</div>
                    <div class="table-cell" style="color: #666;">‚óã</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">004</div>
                    <div class="table-cell">LCDR_PATEL_K</div>
                    <div class="table-cell">SEAL_7</div>
                    <div class="table-cell percentage">5.9%</div>
                    <div class="table-cell error-text">‚óè</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">...</div>
                    <div class="table-cell">...</div>
                    <div class="table-cell">...</div>
                    <div class="table-cell">...</div>
                    <div class="table-cell">...</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">087</div>
                    <div class="table-cell warning-text" id="user-leaderboard-name">SGT_MARTINEZ_J</div>
                    <div class="table-cell" id="user-leaderboard-unit">82ND_ABN</div>
                    <div class="table-cell percentage">2.3%</div>
                    <div class="table-cell error-text">‚óè</div>
                </div>
            </div>
        </div>

        <!-- Treasury Section -->
        <div id="treasury" class="section">
            <div class="treasury-grid">
                <div class="treasury-box">
                    <div style="font-weight: bold; margin-bottom: 15px;">TREASURY_BALANCE</div>
                    <div class="big-number">$24,891,203.47</div>
                    <div class="stat-row">
                        <span class="stat-label">MEMBER_DUES:</span>
                        <span class="stat-value">$18,234,901</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">INVESTMENTS:</span>
                        <span class="stat-value">$6,456,302</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">PENDING:</span>
                        <span class="stat-value">$200,000</span>
                    </div>
                </div>
                
                <div class="treasury-box">
                    <div style="font-weight: bold; margin-bottom: 15px;">MONTHLY_SPENDING</div>
                    <div class="big-number">$1,847,392.12</div>
                    <div class="stat-row">
                        <span class="stat-label">OPERATIONS:</span>
                        <span class="stat-value">$892,341</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">MEMBER_SVCS:</span>
                        <span class="stat-value">$634,821</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">ADMIN:</span>
                        <span class="stat-value">$320,230</span>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <div style="font-weight: bold; margin-bottom: 15px;">BUDGET_ALLOCATION_CHART</div>
                <div class="ascii-chart">
OPERATIONS     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 48.3%
MEMBER_SVCS    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 34.4%
ADMIN          ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 17.3%

INCOME_STREAMS:
MEMBER_DUES    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 73.2%
INVESTMENTS    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 25.9%
DONATIONS      ‚ñà‚ñà 0.9%

HISTORICAL_TREND (12_MONTHS):
JAN  $22.1M  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
FEB  $22.8M  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
MAR  $23.2M  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
APR  $23.9M  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
MAY  $24.1M  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
JUN  $24.3M  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
JUL  $24.6M  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
AUG  $24.9M  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
                </div>
            </div>
        </div>

        <!-- Members Section -->
        <div id="members" class="section">
            <div class="members-table">
                <div style="font-weight: bold; margin-bottom: 15px;">COMPLETE_MEMBER_DIRECTORY</div>
                <div class="table-row">
                    <div class="table-cell">RANK</div>
                    <div class="table-cell">CALLSIGN</div>
                    <div class="table-cell">UNIT</div>
                    <div class="table-cell">STAKE%</div>
                    <div class="table-cell">STATUS</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">001</div>
                    <div class="table-cell">COL_HAYES_R</div>
                    <div class="table-cell">10TH_MTN</div>
                    <div class="table-cell percentage">8.7%</div>
                    <div class="table-cell error-text">‚óè</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">002</div>
                    <div class="table-cell">MAJ_CHEN_L</div>
                    <div class="table-cell">RANGER</div>
                    <div class="table-cell percentage">7.2%</div>
                    <div class="table-cell error-text">‚óè</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">003</div>
                    <div class="table-cell">CSGT_RODRIGUEZ</div>
                    <div class="table-cell">MARSOC</div>
                    <div class="table-cell percentage">6.8%</div>
                    <div class="table-cell" style="color: #666;">‚óã</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">004</div>
                    <div class="table-cell">LCDR_PATEL_K</div>
                    <div class="table-cell">SEAL_7</div>
                    <div class="table-cell percentage">5.9%</div>
                    <div class="table-cell error-text">‚óè</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">005</div>
                    <div class="table-cell">CPT_WILLIAMS_M</div>
                    <div class="table-cell">82ND_ABN</div>
                    <div class="table-cell percentage">5.4%</div>
                    <div class="table-cell error-text">‚óè</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">006</div>
                    <div class="table-cell">SSGT_JOHNSON_T</div>
                    <div class="table-cell">DELTA</div>
                    <div class="table-cell percentage">4.9%</div>
                    <div class="table-cell" style="color: #666;">‚óã</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">007</div>
                    <div class="table-cell">LT_ANDERSON_C</div>
                    <div class="table-cell">101ST_ABN</div>
                    <div class="table-cell percentage">4.7%</div>
                    <div class="table-cell error-text">‚óè</div>
                </div>
                <div class="table-row">
                    <div class="table-cell rank">...</div>
                    <div class="table-cell">...</div>
                    <div class="table-cell">...</div>
                    <div class="table-cell">...</div>
                    <div class="table-cell">...</div>
                </div>
            </div>
            
            <div style="border: 1px solid #00ff41; padding: 15px; background: rgba(0, 255, 65, 0.02); font-size: 10px; color: #666;">
                SEARCH_FILTERS:<br/>
                >> FILTER --unit [UNIT_NAME]<br/>
                >> FILTER --rank [RANK]<br/>
                >> FILTER --status [ONLINE|OFFLINE]<br/>
                >> SORT --stake [ASC|DESC]<br/>
                >> EXPORT --format CSV
            </div>
        </div>

        <!-- Votes Section -->
        <div id="votes" class="section">
            <div class="votes-section">
                <div style="font-weight: bold; margin-bottom: 15px;">ACTIVE_NETWORK_VOTES</div>
                
                <div class="vote-item">
                    <div class="vote-title">PROPOSAL_001: Network Expansion to Coast Guard Veterans</div>
                    <div style="color: #888; font-size: 11px; margin-bottom: 8px;">
                        INITIATED: 08AUG25 | CLOSES: 15AUG25_2359Z | QUORUM: 67% | STATUS: ACTIVE
                    </div>
                    <div class="vote-bar">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 78%;"></div>
                        </div>
                        <span>YES: 78% (1,349 votes) | NO: 22% (381 votes)</span>
                    </div>
                    <div style="margin-top: 8px; font-size: 10px; color: #ffaa00;">
                        >> YOUR_VOTE: NOT_CAST | WEIGHT: 2.3% | DEADLINE: 4d 11h 23m
                    </div>
                </div>

                <div class="vote-item">
                    <div class="vote-title">PROPOSAL_002: Monthly Member Benefit Increase</div>
                    <div style="color: #888; font-size: 11px; margin-bottom: 8px;">
                        INITIATED: 05AUG25 | CLOSES: 12AUG25_2359Z | QUORUM: 67% | STATUS: ACTIVE
                    </div>
                    <div class="vote-bar">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 45%;"></div>
                        </div>
                        <span>YES: 45% (821 votes) | NO: 55% (1,003 votes)</span>
                    </div>
                    <div style="margin-top: 8px; font-size: 10px; color: #00ff41;">
                        >> YOUR_VOTE: YES | WEIGHT: 2.3% | DEADLINE: 1d 7h 42m
                    </div>
                </div>

                <div class="vote-item">
                    <div class="vote-title">PROPOSAL_003: Treasury Investment Strategy Change</div>
                    <div style="color: #888; font-size: 11px; margin-bottom: 8px;">
                        INITIATED: 03AUG25 | CLOSES: 10AUG25_2359Z | QUORUM: 67% | STATUS: ACTIVE
                    </div>
                    <div class="vote-bar">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 89%;"></div>
                        </div>
                        <span>YES: 89% (1,567 votes) | NO: 11% (193 votes)</span>
                    </div>
                    <div style="margin-top: 8px; font-size: 10px; color: #666;">
                        >> YOUR_VOTE: NOT_CAST | WEIGHT: 2.3% | DEADLINE: 18h 15m
                    </div>
                </div>
            </div>

            <div class="votes-section">
                <div style="font-weight: bold; margin-bottom: 15px;">RECENT_VOTE_HISTORY</div>
                
                <div class="vote-item">
                    <div class="vote-title">PROPOSAL_099: Network Security Upgrade</div>
                    <div style="color: #888; font-size: 11px; margin-bottom: 8px;">
                        CLOSED: 01AUG25 | RESULT: PASSED | PARTICIPATION: 73%
                    </div>
                    <div class="vote-bar">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 91%;"></div>
                        </div>
                        <span>FINAL: YES: 91% (1,623 votes) | NO: 9% (160 votes)</span>
                    </div>
                    <div style="margin-top: 8px; font-size: 10px; color: #00ff41;">
                        >> YOUR_VOTE: YES | IMPLEMENTATION: IN_PROGRESS
                    </div>
                </div>

                <div class="vote-item">
                    <div class="vote-title">PROPOSAL_098: Quarterly Dividend Distribution</div>
                    <div style="color: #888; font-size: 11px; margin-bottom: 8px;">
                        CLOSED: 28JUL25 | RESULT: PASSED | PARTICIPATION: 81%
                    </div>
                    <div class="vote-bar">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 87%;"></div>
                        </div>
                        <span>FINAL: YES: 87% (1,891 votes) | NO: 13% (283 votes)</span>
                    </div>
                    <div style="margin-top: 8px; font-size: 10px; color: #00ff41;">
                        >> YOUR_VOTE: YES | STATUS: COMPLETED | PAYOUT: $847.12
                    </div>
                </div>
            </div>

            <div style="border: 1px solid #00ff41; padding: 15px; background: rgba(0, 255, 65, 0.02); font-size: 10px; color: #666;">
                VOTING_COMMANDS:<br/>
                >> VOTE [PROPOSAL_ID] [YES|NO|ABSTAIN]<br/>
                >> DELEGATE [MEMBER_ID] --proposal [PROPOSAL_ID]<br/>
                >> CREATE_PROPOSAL --title "TITLE" --description "DESC"<br/>
                >> VIEW_PROPOSAL [PROPOSAL_ID] --details
            </div>
        </div>

        <!-- Nets Section (Audio Rooms) -->
        <div id="nets" class="section">
            <div class="main-grid">
                <div class="nets-list">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <span style="font-weight: bold; color: #00ff41;">LIVE_NETS</span>
                        <button class="btn-primary" style="width: auto; padding: 8px 15px;" onclick="showCreateNetModal()">+ CREATE_NET</button>
                    </div>
                    <div id="nets-container">
                        <!-- Nets will be loaded here -->
                        <div style="text-align: center; color: #666; padding: 20px;">Loading nets...</div>
                    </div>
                </div>

                <div class="live-stages" style="border: 1px solid #00ff41;">
                    <div style="font-weight: bold; margin-bottom: 15px; color: #00ff41;">QUICK_ACTIONS</div>
                    <div style="margin-bottom: 15px;">
                        <button class="btn-primary" style="margin-bottom: 10px;" onclick="showCreateNetModal()">START_MY_NET</button>
                        <div style="font-size: 10px; color: #666;">
                            Create your own audio room where you're the host. Invite others to speak or let them listen.
                        </div>
                    </div>
                    <div style="border-top: 1px dotted #004d15; padding-top: 15px;">
                        <div style="font-weight: bold; margin-bottom: 10px; color: #ffaa00;">NET_COMMANDS:</div>
                        <div style="font-size: 10px; color: #666;">
                            >> CREATE_NET [NAME]<br/>
                            >> JOIN_NET [NET_ID]<br/>
                            >> LEAVE_NET<br/>
                            >> REQUEST_MIC<br/>
                            >> END_NET
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Communications Section -->
        <div id="comms" class="section">
            <div class="chat-terminal">
                <div class="chat-list">
                    <div style="font-weight: bold; margin-bottom: 15px; color: #00ff41;">CHANNELS</div>
                    
                    <div class="chat-room active" onclick="switchChannel('general')">
                        <span style="margin-right: 8px;">#</span>
                        <span>GENERAL</span>
                        <span class="unread-count">12</span>
                    </div>
                    
                    <div class="chat-room" onclick="switchChannel('officers')">
                        <span style="margin-right: 8px;">#</span>
                        <span>OFFICERS_CLUB</span>
                        <span class="unread-count">3</span>
                    </div>
                    
                    <div class="chat-room" onclick="switchChannel('nco')">
                        <span style="margin-right: 8px;">#</span>
                        <span>NCO_CLUB</span>
                        <span class="unread-count">7</span>
                    </div>
                    
                    <div class="chat-room" onclick="switchChannel('intel')">
                        <span style="margin-right: 8px;">#</span>
                        <span>INTEL_BRIEF</span>
                        <span class="unread-count">--</span>
                    </div>
                    
                    <div style="margin: 15px 0; font-weight: bold; color: #00ff41;">DIRECT_MSG</div>
                    
                    <div class="chat-room" onclick="switchChannel('dm1')">
                        <span style="margin-right: 8px;">@</span>
                        <span>COL_HAYES_R</span>
                        <span class="unread-count">1</span>
                    </div>
                    
                    <div class="chat-room" onclick="switchChannel('dm2')">
                        <span style="margin-right: 8px;">@</span>
                        <span>CPT_WILLIAMS_M</span>
                        <span class="unread-count">--</span>
                    </div>
                    
                    <div class="chat-room" onclick="switchChannel('dm3')">
                        <span style="margin-right: 8px;">@</span>
                        <span>SSGT_CHEN_K</span>
                        <span class="unread-count">5</span>
                    </div>
                </div>

                <div class="chat-window">
                    <div class="chat-header" id="chat-header">
                        #GENERAL - 1,847 members online
                    </div>
                    
                    <div class="chat-messages" id="chat-messages">
                        <div class="message">
                            <div class="message-header">
                                <span>SGT_THOMPSON_A</span>
                                <span class="timestamp">[0847Z]</span>
                            </div>
                            <div>Anyone else having issues with the new benefits portal?</div>
                        </div>
                        
                        <div class="message">
                            <div class="message-header">
                                <span>LCDR_PATEL_K</span>
                                <span class="timestamp">[0849Z]</span>
                            </div>
                            <div>@SGT_THOMPSON_A Try clearing your browser cache, worked for me</div>
                        </div>
                        
                        <div class="message">
                            <div class="message-header">
                                <span>CPL_MARTINEZ_R</span>
                                <span class="timestamp">[0851Z]</span>
                            </div>
                            <div>Reminder: Network vote on Coast Guard expansion closes in 4 days</div>
                        </div>
                        
                        <div class="message">
                            <div class="message-header">
                                <span>MAJ_CHEN_L</span>
                                <span class="timestamp">[0853Z]</span>
                            </div>
                            <div>Good morning everyone. Treasury report will be posted after the 1000Z briefing</div>
                        </div>
                        
                        <div class="message">
                            <div class="message-header">
                                <span>SFC_RODRIGUEZ_J</span>
                                <span class="timestamp">[0855Z]</span>
                            </div>
                            <div>New member orientation tonight at 1900Z. All welcome to join and help</div>
                        </div>
                        
                        <div class="message">
                            <div class="message-header">
                                <span>LT_ANDERSON_C</span>
                                <span class="timestamp">[0857Z]</span>
                            </div>
                            <div>Can confirm benefits portal is working now. Thanks for the quick fix team</div>
                        </div>
                    </div>
                    
                    <div class="chat-input">
                        <input type="text" placeholder="Type message..." id="message-input" />
                        <button onclick="sendMessage()">SEND</button>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 20px; border: 1px solid #00ff41; padding: 15px; background: rgba(0, 255, 65, 0.02); font-size: 10px; color: #666;">
                COMMUNICATION_COMMANDS:<br/>
                >> MSG [CHANNEL|@USER] [MESSAGE]<br/>
                >> JOIN_VOICE [STAGE_NAME]<br/>
                >> MUTE_USER [USER_ID] --duration [TIME]<br/>
                >> CREATE_CHANNEL [CHANNEL_NAME] --private<br/>
                >> BROADCAST [MESSAGE] --all-members
            </div>
        </div>

        <!-- Profile Popup -->
        <div class="profile-popup" id="profile-popup" onclick="closeProfile(event)">
            <div class="profile-content" onclick="event.stopPropagation()">
                <button class="profile-close" onclick="closeProfile()">√ó</button>
                
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 16px; font-weight: bold; color: #00ff41;">MEMBER_PROFILE</div>
                    <div style="margin-top: 10px; font-size: 14px;" id="profile-username">SGT_MARTINEZ_JAMES</div>
                </div>
                
                <div class="profile-info" id="profile-info">
                    <div class="profile-row">
                        <span class="stat-label">RANK:</span>
                        <span class="stat-value" id="profile-rank">E-5 SERGEANT</span>
                    </div>
                    <div class="profile-row">
                        <span class="stat-label">UNIT:</span>
                        <span class="stat-value" id="profile-unit">82ND AIRBORNE DIVISION</span>
                    </div>
                    <div class="profile-row">
                        <span class="stat-label">MOS:</span>
                        <span class="stat-value">11B INFANTRYMAN</span>
                    </div>
                    <div class="profile-row">
                        <span class="stat-label">SERVICE_YEARS:</span>
                        <span class="stat-value">2018-2023 (5 YEARS)</span>
                    </div>
                    <div class="profile-row">
                        <span class="stat-label">DEPLOYMENT_HISTORY:</span>
                        <span class="stat-value">AFGHANISTAN (2019-2020)</span>
                    </div>
                    <div class="profile-row">
                        <span class="stat-label">CLEARANCE:</span>
                        <span class="stat-value warning-text">SECRET</span>
                    </div>
                    <div class="profile-row">
                        <span class="stat-label">NETWORK_STAKE:</span>
                        <span class="stat-value percentage">2.3%</span>
                    </div>
                    <div class="profile-row">
                        <span class="stat-label">JOIN_DATE:</span>
                        <span class="stat-value">15MAR24</span>
                    </div>
                </div>
                
                <div class="badges-container">
                    <div style="font-weight: bold; margin-bottom: 10px;">VERIFIED_AWARDS:</div>
                    <div id="profile-badges">
                        <div class="badge">COMBAT_INFANTRYMAN</div>
                        <div class="badge">EXPERT_MARKSMAN</div>
                        <div class="badge">AIRBORNE_WINGS</div>
                        <div class="badge">ARMY_COMMENDATION</div>
                        <div class="badge">GOOD_CONDUCT</div>
                        <div class="badge">AFGHANISTAN_CAMPAIGN</div>
                        <div class="badge">OVERSEAS_SERVICE</div>
                    </div>
                </div>
                
                <div style="margin-top: 15px; font-size: 10px; color: #666;">
                    VERIFICATION_STATUS: DD214_AUTHENTICATED<br/>
                    LAST_BACKGROUND_CHECK: 15MAR24<br/>
                    NEXT_VERIFICATION: 15MAR25
                </div>

                <!-- Referral Section -->
                <div class="invite-section" id="referral-section">
                    <div style="font-weight: bold; margin-bottom: 10px; color: #00ff41;">REFERRAL_NETWORK</div>

                    <!-- Who referred you -->
                    <div id="referred-by-section" class="hidden">
                        <div class="profile-row">
                            <span class="stat-label">RECRUITED_BY:</span>
                            <span class="stat-value" id="referred-by-name">--</span>
                        </div>
                    </div>

                    <!-- Your referral stats -->
                    <div class="invite-stats">
                        <span>INVITES_THIS_WEEK: <span id="invites-remaining">5</span>/5</span>
                        <span>TOTAL_RECRUITS: <span id="total-referrals">0</span></span>
                    </div>

                    <!-- Generate invite button -->
                    <button class="btn-primary" style="margin: 10px 0;" onclick="generateInvite()">
                        GENERATE_INVITE_CODE
                    </button>

                    <!-- Active invite code display -->
                    <div id="invite-code-display" class="hidden">
                        <div class="invite-code" onclick="copyInviteCode()">
                            <span id="current-invite-code">VET-XXXXXX</span>
                            <div style="font-size: 9px; color: #888; margin-top: 5px;">TAP TO COPY</div>
                        </div>
                        <div style="text-align: center; margin-top: 5px;">
                            <button class="btn-secondary" style="width: auto; padding: 8px 15px;" onclick="shareInvite()">
                                SHARE_INVITE
                            </button>
                        </div>
                    </div>

                    <!-- Your recruits list -->
                    <div id="referrals-list" class="hidden" style="margin-top: 15px;">
                        <div style="font-size: 10px; color: #888; margin-bottom: 5px;">YOUR_RECRUITS:</div>
                        <div id="referrals-container"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Net Room Popup -->
    <div class="net-popup" id="net-popup">
        <div class="net-header">
            <div>
                <div class="net-title" id="net-room-name">NET_NAME</div>
                <div style="font-size: 10px; color: #888;" id="net-room-host">Hosted by: HOST_NAME</div>
            </div>
            <div class="net-status">
                <span class="net-live-badge">LIVE</span>
                <button class="profile-close" onclick="closeNetRoom()">√ó</button>
            </div>
        </div>

        <div class="net-body">
            <div class="net-stage">
                <div class="speakers-section">
                    <div style="font-weight: bold; margin-bottom: 10px;">SPEAKERS</div>
                    <div class="speakers-grid" id="speakers-grid">
                        <!-- Speakers will be loaded here -->
                    </div>
                </div>

                <!-- Speak requests panel (only for hosts) -->
                <div class="requests-panel hidden" id="requests-panel">
                    <div style="font-weight: bold; margin-bottom: 10px; color: #ffaa00;">SPEAK_REQUESTS</div>
                    <div id="requests-list">
                        <!-- Requests will be loaded here -->
                    </div>
                </div>

                <div class="listeners-section">
                    <div class="listeners-count" id="listeners-count">LISTENERS: 0</div>
                    <div class="listeners-list" id="listeners-list">
                        <!-- Listeners will be loaded here -->
                    </div>
                </div>
            </div>

            <div class="net-sidebar">
                <div class="net-chat-header">LIVE_CHAT</div>
                <div class="net-chat-messages" id="net-chat-messages">
                    <!-- Chat messages will be loaded here -->
                </div>
                <div class="net-chat-input">
                    <input type="text" id="net-chat-input" placeholder="Type message..." />
                    <button onclick="sendNetMessage()">SEND</button>
                </div>
            </div>
        </div>

        <div class="net-controls" id="net-controls">
            <!-- Controls will be dynamically added based on user role -->
        </div>
    </div>

    <!-- Create Net Modal -->
    <div class="create-net-modal" id="create-net-modal" onclick="closeCreateNetModal(event)">
        <div class="create-net-content" onclick="event.stopPropagation()">
            <div style="font-size: 16px; font-weight: bold; margin-bottom: 20px; color: #00ff41;">CREATE_NEW_NET</div>

            <div class="form-group">
                <label class="form-label">NET_NAME:</label>
                <input type="text" class="form-input" id="new-net-name" placeholder="e.g., FRIDAY_DEBRIEF" />
            </div>

            <div class="form-group">
                <label class="form-label">DESCRIPTION (optional):</label>
                <input type="text" class="form-input" id="new-net-description" placeholder="What's this net about?" />
            </div>

            <div style="margin: 20px 0; padding: 15px; border: 1px solid #004d15; font-size: 10px; color: #888;">
                <div style="color: #ffaa00; margin-bottom: 8px;">AS_HOST_YOU_CAN:</div>
                ‚Ä¢ Speak to all listeners<br/>
                ‚Ä¢ Invite co-hosts<br/>
                ‚Ä¢ Approve/deny speak requests<br/>
                ‚Ä¢ End the net at any time
            </div>

            <button class="btn-primary" onclick="createNet()">GO_LIVE</button>
            <button class="btn-secondary" onclick="closeCreateNetModal()">CANCEL</button>
        </div>
    </div>

    <div class="system-info">
        SYSTEM_STATUS: OPERATIONAL | PING: 23ms | LAST_SYNC: 11AUG25_0847Z
    </div>

    <script>
        // Global state
        let currentStep = 1;
        let verificationData = {
            dd214: null,
            driverLicense: null,
            rank: null,
            name: null,
            badges: [],
            units: []
        };
        let webcamStream = null;
        let currentUser = null;
        let channelIdMap = {}; // Maps channel names to IDs

        // API Helper
        const API_BASE = '';
        async function api(endpoint, options = {}) {
            const res = await fetch(`${API_BASE}${endpoint}`, {
                headers: { 'Content-Type': 'application/json', ...options.headers },
                ...options
            });
            return res.json();
        }

        // Format currency
        function formatCurrency(num) {
            return '$' + num.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }

        function formatLargeNumber(num) {
            return num.toLocaleString('en-US');
        }

        // Auth Functions
        function showSignup() {
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('signup-form').classList.remove('hidden');
        }

        function showLogin() {
            document.getElementById('signup-form').classList.add('hidden');
            document.getElementById('login-form').classList.remove('hidden');
        }

        async function handleLogin() {
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;

            if (username && password) {
                try {
                    const result = await api('/api/auth/login', {
                        method: 'POST',
                        body: JSON.stringify({ username, password })
                    });

                    if (result.success) {
                        currentUser = result.user;
                        document.getElementById('auth-screen').classList.add('hidden');
                        document.getElementById('main-app').classList.add('active');
                        document.getElementById('current-user').textContent = currentUser.username;

                        // Load all data
                        await loadAllData();
                    }
                } catch (err) {
                    console.error('Login error:', err);
                    alert('Login failed');
                }
            } else {
                alert('Please enter username and password');
            }
        }

        async function startVerification() {
            const email = document.getElementById('signup-email').value;
            const username = document.getElementById('signup-username').value;
            const password = document.getElementById('signup-password').value;

            if (email && username && password) {
                // Start verification flow
                document.getElementById('auth-screen').classList.add('hidden');
                document.getElementById('verification-screen').classList.remove('hidden');
                document.getElementById('current-user').textContent = username.toUpperCase();
            } else {
                alert('Please fill in all fields');
            }
        }

        async function logout() {
            if (confirm('Are you sure you want to logout?')) {
                if (currentUser) {
                    await api('/api/auth/logout', {
                        method: 'POST',
                        body: JSON.stringify({ userId: currentUser.id })
                    });
                }
                currentUser = null;
                document.getElementById('main-app').classList.remove('active');
                document.getElementById('auth-screen').classList.remove('hidden');
                document.getElementById('login-username').value = '';
                document.getElementById('login-password').value = '';
            }
        }

        // Load all data from APIs
        async function loadAllData() {
            await Promise.all([
                loadNetworkStats(),
                loadTreasury(),
                loadLeaderboard(),
                loadMembers(),
                loadProposals(),
                loadChannels(),
                loadNets(),
                loadNetsInOverview(),
                loadUserProfile()
            ]);
        }

        // Load network stats
        async function loadNetworkStats() {
            const stats = await api('/api/stats');
            const treasury = await api('/api/treasury');

            const statsContainer = document.querySelector('.stats-section');
            const statRows = statsContainer.querySelectorAll('.stat-row');

            statRows[0].querySelector('.stat-value').textContent = formatLargeNumber(stats.total_members);
            statRows[1].querySelector('.stat-value').textContent = formatCurrency(stats.annual_income);
            statRows[2].querySelector('.stat-value').textContent = formatLargeNumber(stats.active_nodes);
            statRows[3].querySelector('.stat-value').textContent = formatCurrency(treasury.balance);

            if (currentUser) {
                statRows[4].querySelector('.stat-value').textContent = currentUser.stake_percentage + '%';
                statRows[5].querySelector('.stat-value').textContent = formatCurrency(currentUser.last_dividend || 0);
            }
        }

        // Load treasury data
        async function loadTreasury() {
            const treasury = await api('/api/treasury');

            // Update treasury balance box
            document.querySelector('#treasury .treasury-box:first-child .big-number').textContent = formatCurrency(treasury.balance);
            const balanceRows = document.querySelectorAll('#treasury .treasury-box:first-child .stat-row');
            balanceRows[0].querySelector('.stat-value').textContent = formatCurrency(treasury.member_dues);
            balanceRows[1].querySelector('.stat-value').textContent = formatCurrency(treasury.investments);
            balanceRows[2].querySelector('.stat-value').textContent = formatCurrency(treasury.pending);

            // Update spending box
            document.querySelector('#treasury .treasury-box:last-child .big-number').textContent = formatCurrency(treasury.monthly_spending);
            const spendingRows = document.querySelectorAll('#treasury .treasury-box:last-child .stat-row');
            spendingRows[0].querySelector('.stat-value').textContent = formatCurrency(treasury.operations_spending);
            spendingRows[1].querySelector('.stat-value').textContent = formatCurrency(treasury.member_services_spending);
            spendingRows[2].querySelector('.stat-value').textContent = formatCurrency(treasury.admin_spending);

            // Update ASCII chart with real percentages
            const totalSpending = treasury.operations_spending + treasury.member_services_spending + treasury.admin_spending;
            const opsPct = ((treasury.operations_spending / totalSpending) * 100).toFixed(1);
            const svcPct = ((treasury.member_services_spending / totalSpending) * 100).toFixed(1);
            const adminPct = ((treasury.admin_spending / totalSpending) * 100).toFixed(1);

            const totalIncome = treasury.member_dues + treasury.investments + (treasury.pending * 0.1);
            const duesPct = ((treasury.member_dues / totalIncome) * 100).toFixed(1);
            const invPct = ((treasury.investments / totalIncome) * 100).toFixed(1);

            const chart = `OPERATIONS     ${'‚ñà'.repeat(Math.floor(opsPct / 2))} ${opsPct}%
MEMBER_SVCS    ${'‚ñà'.repeat(Math.floor(svcPct / 2))} ${svcPct}%
ADMIN          ${'‚ñà'.repeat(Math.floor(adminPct / 2))} ${adminPct}%

INCOME_STREAMS:
MEMBER_DUES    ${'‚ñà'.repeat(Math.floor(duesPct))} ${duesPct}%
INVESTMENTS    ${'‚ñà'.repeat(Math.floor(invPct / 2.5))} ${invPct}%
DONATIONS      ${'‚ñà'.repeat(2)} 0.9%

HISTORICAL_TREND (12_MONTHS):
JAN  $22.1M  ${'‚ñà'.repeat(44)}
FEB  $22.8M  ${'‚ñà'.repeat(49)}
MAR  $23.2M  ${'‚ñà'.repeat(54)}
APR  $23.9M  ${'‚ñà'.repeat(57)}
MAY  $24.1M  ${'‚ñà'.repeat(58)}
JUN  $24.3M  ${'‚ñà'.repeat(59)}
JUL  $24.6M  ${'‚ñà'.repeat(60)}
AUG  $${(treasury.balance / 1000000).toFixed(1)}M  ${'‚ñà'.repeat(61)}`;

            document.querySelector('.ascii-chart').textContent = chart;
        }

        // Load leaderboard
        async function loadLeaderboard() {
            const leaders = await api('/api/members/leaderboard?limit=6');
            const leaderboardContainer = document.querySelector('#overview .members-table');

            // Keep header row
            const headerRow = leaderboardContainer.querySelector('.table-row:first-child');
            leaderboardContainer.innerHTML = '';
            leaderboardContainer.innerHTML = '<div style="font-weight: bold; margin-bottom: 15px;">TOP_STAKEHOLDERS_LEADERBOARD</div>';
            leaderboardContainer.appendChild(headerRow);

            leaders.forEach((member, index) => {
                const row = document.createElement('div');
                row.className = 'table-row';
                row.innerHTML = `
                    <div class="table-cell rank">${String(index + 1).padStart(3, '0')}</div>
                    <div class="table-cell">${member.username}</div>
                    <div class="table-cell">${member.unit || 'N/A'}</div>
                    <div class="table-cell percentage">${member.stake_percentage}%</div>
                    <div class="table-cell ${member.is_online ? 'error-text' : ''}" style="${!member.is_online ? 'color: #666;' : ''}">${member.is_online ? '‚óè' : '‚óã'}</div>
                `;
                leaderboardContainer.appendChild(row);
            });

            // Add ellipsis and current user
            if (currentUser) {
                const ellipsisRow = document.createElement('div');
                ellipsisRow.className = 'table-row';
                ellipsisRow.innerHTML = `
                    <div class="table-cell rank">...</div>
                    <div class="table-cell">...</div>
                    <div class="table-cell">...</div>
                    <div class="table-cell">...</div>
                    <div class="table-cell">...</div>
                `;
                leaderboardContainer.appendChild(ellipsisRow);

                const userRow = document.createElement('div');
                userRow.className = 'table-row';
                userRow.innerHTML = `
                    <div class="table-cell rank">087</div>
                    <div class="table-cell warning-text">${currentUser.username}</div>
                    <div class="table-cell">${currentUser.unit || 'N/A'}</div>
                    <div class="table-cell percentage">${currentUser.stake_percentage}%</div>
                    <div class="table-cell error-text">‚óè</div>
                `;
                leaderboardContainer.appendChild(userRow);
            }
        }

        // Load members
        async function loadMembers() {
            const { members } = await api('/api/members?limit=20');
            const membersContainer = document.querySelector('#members .members-table');

            membersContainer.innerHTML = '<div style="font-weight: bold; margin-bottom: 15px;">COMPLETE_MEMBER_DIRECTORY</div>';

            // Add header
            const headerRow = document.createElement('div');
            headerRow.className = 'table-row';
            headerRow.innerHTML = `
                <div class="table-cell">RANK</div>
                <div class="table-cell">CALLSIGN</div>
                <div class="table-cell">UNIT</div>
                <div class="table-cell">STAKE%</div>
                <div class="table-cell">STATUS</div>
            `;
            membersContainer.appendChild(headerRow);

            members.forEach((member, index) => {
                const row = document.createElement('div');
                row.className = 'table-row';
                row.innerHTML = `
                    <div class="table-cell rank">${String(index + 1).padStart(3, '0')}</div>
                    <div class="table-cell">${member.username}</div>
                    <div class="table-cell">${member.unit || 'N/A'}</div>
                    <div class="table-cell percentage">${member.stake_percentage}%</div>
                    <div class="table-cell ${member.is_online ? 'error-text' : ''}" style="${!member.is_online ? 'color: #666;' : ''}">${member.is_online ? '‚óè' : '‚óã'}</div>
                `;
                membersContainer.appendChild(row);
            });
        }

        // Load proposals
        async function loadProposals() {
            const proposals = await api('/api/proposals');
            let userVotes = [];
            if (currentUser) {
                userVotes = await api(`/api/users/${currentUser.id}/votes`);
            }

            const activeContainer = document.querySelector('#votes .votes-section:first-child');
            const historyContainer = document.querySelector('#votes .votes-section:last-child');

            activeContainer.innerHTML = '<div style="font-weight: bold; margin-bottom: 15px;">ACTIVE_NETWORK_VOTES</div>';
            historyContainer.innerHTML = '<div style="font-weight: bold; margin-bottom: 15px;">RECENT_VOTE_HISTORY</div>';

            proposals.forEach(proposal => {
                const totalVotes = proposal.yes_count + proposal.no_count;
                const yesPercent = totalVotes > 0 ? Math.round((proposal.yes_count / totalVotes) * 100) : 0;
                const noPercent = 100 - yesPercent;

                const userVote = userVotes.find(v => v.proposal_id === proposal.id);
                const voteStatus = userVote
                    ? `<span class="status-success">YOUR_VOTE: ${userVote.vote.toUpperCase()}</span>`
                    : '<span class="warning-text">YOUR_VOTE: NOT_CAST</span>';

                const voteItem = document.createElement('div');
                voteItem.className = 'vote-item';
                voteItem.onclick = () => showVoteDialog(proposal.id, proposal.title);
                voteItem.innerHTML = `
                    <div class="vote-title">PROPOSAL_${String(proposal.id).padStart(3, '0')}: ${proposal.title}</div>
                    <div style="color: #888; font-size: 11px; margin-bottom: 8px;">
                        INITIATED: ${proposal.initiated_date} | CLOSES: ${proposal.closes_date}_2359Z | QUORUM: ${proposal.quorum_required}% | STATUS: ${proposal.status.toUpperCase()}
                    </div>
                    <div class="vote-bar">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${yesPercent}%;"></div>
                        </div>
                        <span>${proposal.status === 'active' ? '' : 'FINAL: '}YES: ${yesPercent}% (${formatLargeNumber(proposal.yes_count)} votes) | NO: ${noPercent}% (${formatLargeNumber(proposal.no_count)} votes)</span>
                    </div>
                    <div style="margin-top: 8px; font-size: 10px;">
                        >> ${voteStatus} | WEIGHT: ${currentUser?.stake_percentage || 0}%
                    </div>
                `;

                if (proposal.status === 'active') {
                    activeContainer.appendChild(voteItem);
                } else {
                    historyContainer.appendChild(voteItem);
                }
            });
        }

        // Vote dialog
        async function showVoteDialog(proposalId, title) {
            if (!currentUser) return;

            const vote = prompt(`Vote on "${title}"\n\nEnter: yes, no, or abstain`);
            if (vote && ['yes', 'no', 'abstain'].includes(vote.toLowerCase())) {
                await api(`/api/proposals/${proposalId}/vote`, {
                    method: 'POST',
                    body: JSON.stringify({ userId: currentUser.id, vote: vote.toLowerCase() })
                });
                await loadProposals();
            }
        }

        // Load channels
        async function loadChannels() {
            const channels = await api('/api/channels');
            const chatList = document.querySelector('.chat-list');

            chatList.innerHTML = '<div style="font-weight: bold; margin-bottom: 15px; color: #00ff41;">CHANNELS</div>';

            const regularChannels = channels.filter(c => c.type === 'channel');
            const dmChannels = channels.filter(c => c.type === 'dm');

            regularChannels.forEach((channel, index) => {
                channelIdMap[channel.name.toLowerCase()] = channel.id;
                const room = document.createElement('div');
                room.className = `chat-room${index === 0 ? ' active' : ''}`;
                room.onclick = () => switchChannel(channel.id, channel.name);
                room.innerHTML = `
                    <span style="margin-right: 8px;">#</span>
                    <span>${channel.name}</span>
                    <span class="unread-count">${channel.unread_count || '--'}</span>
                `;
                chatList.appendChild(room);
            });

            chatList.innerHTML += '<div style="margin: 15px 0; font-weight: bold; color: #00ff41;">DIRECT_MSG</div>';

            dmChannels.forEach(channel => {
                channelIdMap[channel.name.toLowerCase()] = channel.id;
                const displayName = channel.name.replace('DM_', '');
                const room = document.createElement('div');
                room.className = 'chat-room';
                room.onclick = () => switchChannel(channel.id, displayName, true);
                room.innerHTML = `
                    <span style="margin-right: 8px;">@</span>
                    <span>${displayName}</span>
                    <span class="unread-count">${channel.unread_count || '--'}</span>
                `;
                chatList.appendChild(room);
            });

            // Load first channel messages
            if (regularChannels.length > 0) {
                await loadMessages(regularChannels[0].id, regularChannels[0].name);
            }
        }

        let currentChannelId = null;

        async function switchChannel(channelId, channelName, isDM = false) {
            const rooms = document.querySelectorAll('.chat-room');
            rooms.forEach(room => room.classList.remove('active'));
            event.target.closest('.chat-room').classList.add('active');

            currentChannelId = channelId;
            await loadMessages(channelId, channelName, isDM);
        }

        async function loadMessages(channelId, channelName, isDM = false) {
            currentChannelId = channelId;
            const messages = await api(`/api/channels/${channelId}/messages`);

            const chatHeader = document.getElementById('chat-header');
            const chatMessages = document.getElementById('chat-messages');

            chatHeader.textContent = isDM ? `DM: ${channelName}` : `#${channelName} - ${messages.length} messages`;
            chatMessages.innerHTML = '';

            messages.forEach(msg => {
                const timestamp = new Date(msg.timestamp);
                const timeStr = `[${String(timestamp.getUTCHours()).padStart(2, '0')}${String(timestamp.getUTCMinutes()).padStart(2, '0')}Z]`;

                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';
                messageDiv.innerHTML = `
                    <div class="message-header">
                        <span>${msg.username}</span>
                        <span class="timestamp">${timeStr}</span>
                    </div>
                    <div>${msg.content}</div>
                `;
                chatMessages.appendChild(messageDiv);
            });

            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        async function sendMessage() {
            const input = document.getElementById('message-input');
            const message = input.value.trim();

            if (message && currentChannelId && currentUser) {
                const newMsg = await api(`/api/channels/${currentChannelId}/messages`, {
                    method: 'POST',
                    body: JSON.stringify({ userId: currentUser.id, content: message })
                });

                const chatMessages = document.getElementById('chat-messages');
                const timestamp = new Date(newMsg.timestamp);
                const timeStr = `[${String(timestamp.getUTCHours()).padStart(2, '0')}${String(timestamp.getUTCMinutes()).padStart(2, '0')}Z]`;

                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';
                messageDiv.innerHTML = `
                    <div class="message-header">
                        <span>${newMsg.username}</span>
                        <span class="timestamp">${timeStr}</span>
                    </div>
                    <div>${newMsg.content}</div>
                `;
                chatMessages.appendChild(messageDiv);

                input.value = '';
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }

        // Load user profile
        async function loadUserProfile() {
            if (!currentUser) return;

            const profile = await api(`/api/profile/${currentUser.id}`);
            currentUser = { ...currentUser, ...profile };

            document.getElementById('profile-username').textContent = profile.username;
            document.getElementById('profile-rank').textContent = `${profile.rank_code} ${profile.rank_title}`;
            document.getElementById('profile-unit').textContent = profile.unit?.replace(/_/g, ' ') || 'N/A';

            // Update other profile fields
            const profileRows = document.querySelectorAll('.profile-row .stat-value');
            if (profileRows.length >= 8) {
                profileRows[2].textContent = profile.mos || 'N/A';
                profileRows[3].textContent = profile.service_years || 'N/A';
                profileRows[4].textContent = profile.deployment_history || 'N/A';
                profileRows[5].textContent = profile.clearance || 'N/A';
                profileRows[6].textContent = profile.stake_percentage + '%';
                profileRows[7].textContent = profile.join_date || 'N/A';
            }

            // Update badges
            const badgesContainer = document.getElementById('profile-badges');
            if (profile.badges && profile.badges.length > 0) {
                badgesContainer.innerHTML = profile.badges.map(badge =>
                    `<div class="badge">${badge}</div>`
                ).join('');
            }

            // Load referral data
            await loadReferralData();
        }

        // ============ REFERRAL SYSTEM ============

        let currentInviteCode = null;

        // Toast notification helper
        function showToast(message) {
            const existing = document.querySelector('.toast');
            if (existing) existing.remove();

            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => toast.remove(), 3000);
        }

        // Load referral data for current user
        async function loadReferralData() {
            if (!currentUser) return;

            try {
                // Get invite stats
                const inviteData = await api(`/api/invites/${currentUser.id}`);
                document.getElementById('invites-remaining').textContent = inviteData.weeklyInvitesRemaining;
                document.getElementById('total-referrals').textContent = inviteData.totalReferrals;

                // Check if user was referred by someone
                const referrerData = await api(`/api/users/${currentUser.id}/referrer`);
                if (referrerData.referrer) {
                    document.getElementById('referred-by-section').classList.remove('hidden');
                    document.getElementById('referred-by-name').textContent = referrerData.referrer.username;
                }

                // Load list of people this user has referred
                const referralsData = await api(`/api/users/${currentUser.id}/referrals`);
                if (referralsData.count > 0) {
                    document.getElementById('referrals-list').classList.remove('hidden');
                    const container = document.getElementById('referrals-container');
                    container.innerHTML = referralsData.referrals.map(r =>
                        `<div class="referral-badge">${r.username}</div>`
                    ).join('');
                }

                // Show most recent unused invite if exists
                const unusedInvite = inviteData.invites.find(i => !i.used_by);
                if (unusedInvite) {
                    currentInviteCode = unusedInvite.code;
                    document.getElementById('current-invite-code').textContent = unusedInvite.code;
                    document.getElementById('invite-code-display').classList.remove('hidden');
                }
            } catch (err) {
                console.error('Error loading referral data:', err);
            }
        }

        // Generate a new invite code
        async function generateInvite() {
            if (!currentUser) return;

            try {
                const result = await api('/api/invites', {
                    method: 'POST',
                    body: JSON.stringify({ userId: currentUser.id })
                });

                if (result.error) {
                    showToast(result.error);
                    return;
                }

                currentInviteCode = result.invite.code;
                document.getElementById('current-invite-code').textContent = result.invite.code;
                document.getElementById('invite-code-display').classList.remove('hidden');
                document.getElementById('invites-remaining').textContent = result.remaining;

                showToast('INVITE_CODE_GENERATED!');
            } catch (err) {
                showToast('ERROR_GENERATING_INVITE');
            }
        }

        // Copy invite code to clipboard
        async function copyInviteCode() {
            if (!currentInviteCode) return;

            try {
                await navigator.clipboard.writeText(currentInviteCode);
                showToast('CODE_COPIED: ' + currentInviteCode);
            } catch (err) {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = currentInviteCode;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast('CODE_COPIED: ' + currentInviteCode);
            }
        }

        // Share invite via native share or copy link
        async function shareInvite() {
            if (!currentInviteCode) return;

            const shareText = `Join VETNET - the credentialed veterans network. Use my invite code: ${currentInviteCode}`;
            const shareUrl = window.location.origin + '?invite=' + currentInviteCode;

            if (navigator.share) {
                try {
                    await navigator.share({
                        title: 'VETNET Invite',
                        text: shareText,
                        url: shareUrl
                    });
                    showToast('INVITE_SHARED!');
                } catch (err) {
                    if (err.name !== 'AbortError') {
                        copyInviteCode();
                    }
                }
            } else {
                // Fallback: copy to clipboard
                try {
                    await navigator.clipboard.writeText(shareText + '\n' + shareUrl);
                    showToast('INVITE_LINK_COPIED!');
                } catch (err) {
                    copyInviteCode();
                }
            }
        }

        // Check for invite code in URL on page load
        function checkInviteCode() {
            const urlParams = new URLSearchParams(window.location.search);
            const inviteCode = urlParams.get('invite');
            if (inviteCode) {
                // Store for use during signup
                sessionStorage.setItem('pendingInviteCode', inviteCode);
                showToast('INVITE_CODE_DETECTED: ' + inviteCode);
            }
        }

        // Call on page load
        document.addEventListener('DOMContentLoaded', checkInviteCode);

        // ============ NETS (AUDIO ROOMS) SYSTEM ============

        let currentNetId = null;
        let currentNetData = null;
        let netRefreshInterval = null;
        let netChatRefreshInterval = null;

        // Load all live nets
        async function loadNets() {
            try {
                const nets = await api('/api/nets?status=live');
                const container = document.getElementById('nets-container');

                if (nets.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; color: #666; padding: 30px;">
                            <div style="font-size: 24px; margin-bottom: 10px;">üìª</div>
                            <div>No live nets right now</div>
                            <div style="font-size: 10px; margin-top: 5px;">Be the first to start one!</div>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = nets.map(net => `
                    <div class="net-item" onclick="joinNet(${net.id})">
                        <span class="net-item-live">‚óè</span>
                        <div class="net-item-info">
                            <div class="net-item-name">${net.name}</div>
                            <div class="net-item-host">Host: ${net.host_username}</div>
                        </div>
                        <div class="net-item-stats">
                            <div class="net-item-count">${net.participant_count}</div>
                            <div>listening</div>
                            <div style="margin-top: 5px;">${net.speaker_count} speakers</div>
                        </div>
                    </div>
                `).join('');
            } catch (err) {
                console.error('Error loading nets:', err);
            }
        }

        // Also update the overview stages section to show nets
        async function loadNetsInOverview() {
            try {
                const nets = await api('/api/nets?status=live');
                const stagesContainer = document.querySelector('.live-stages');

                if (!stagesContainer) return;

                stagesContainer.innerHTML = '<div style="font-weight: bold; margin-bottom: 15px; color: #00ff41;">LIVE_NETS</div>';

                if (nets.length === 0) {
                    stagesContainer.innerHTML += `
                        <div style="text-align: center; color: #666; padding: 20px;">
                            <div>No live nets</div>
                        </div>
                    `;
                } else {
                    nets.slice(0, 4).forEach(net => {
                        const stageItem = document.createElement('div');
                        stageItem.className = 'stage-item';
                        stageItem.onclick = () => joinNet(net.id);
                        stageItem.innerHTML = `
                            <span class="live-indicator">‚óè</span>
                            <span>${net.name}</span>
                            <span class="stage-listeners">${net.participant_count}</span>
                        `;
                        stagesContainer.appendChild(stageItem);
                    });
                }

                stagesContainer.innerHTML += `
                    <div style="margin-top: 15px;">
                        <button class="btn-primary" style="font-size: 10px; padding: 8px;" onclick="showCreateNetModal()">+ START_NET</button>
                    </div>
                `;
            } catch (err) {
                console.error('Error loading nets in overview:', err);
            }
        }

        // Show create net modal
        function showCreateNetModal() {
            document.getElementById('create-net-modal').classList.add('show');
            document.getElementById('new-net-name').focus();
        }

        // Close create net modal
        function closeCreateNetModal(event) {
            if (!event || event.target.id === 'create-net-modal') {
                document.getElementById('create-net-modal').classList.remove('show');
                document.getElementById('new-net-name').value = '';
                document.getElementById('new-net-description').value = '';
            }
        }

        // Create a new net
        async function createNet() {
            if (!currentUser) return;

            const name = document.getElementById('new-net-name').value.trim().toUpperCase().replace(/\s+/g, '_');
            const description = document.getElementById('new-net-description').value.trim();

            if (!name) {
                showToast('Please enter a net name');
                return;
            }

            try {
                const net = await api('/api/nets', {
                    method: 'POST',
                    body: JSON.stringify({ userId: currentUser.id, name, description })
                });

                closeCreateNetModal();
                showToast('NET_CREATED! You are now LIVE');
                await joinNet(net.id);
                await loadNets();
                await loadNetsInOverview();
            } catch (err) {
                showToast('Error creating net');
            }
        }

        // Join a net
        async function joinNet(netId) {
            if (!currentUser) return;

            try {
                await api(`/api/nets/${netId}/join`, {
                    method: 'POST',
                    body: JSON.stringify({ userId: currentUser.id })
                });

                currentNetId = netId;
                await loadNetRoom();
                document.getElementById('net-popup').classList.add('show');

                // Start auto-refresh
                netRefreshInterval = setInterval(loadNetRoom, 5000);
                netChatRefreshInterval = setInterval(loadNetChat, 3000);

            } catch (err) {
                showToast('Error joining net');
            }
        }

        // Load net room data
        async function loadNetRoom() {
            if (!currentNetId) return;

            try {
                const net = await api(`/api/nets/${currentNetId}`);
                currentNetData = net;

                // Update header
                document.getElementById('net-room-name').textContent = net.name;
                document.getElementById('net-room-host').textContent = `Hosted by: ${net.host_username}`;

                // Get current user's role
                const myParticipant = net.participants.find(p => p.user_id === currentUser.id);
                const myRole = myParticipant?.role || 'listener';
                const isHost = myRole === 'host' || myRole === 'co-host';

                // Render speakers
                const speakers = net.participants.filter(p => ['host', 'co-host', 'speaker'].includes(p.role));
                const speakersGrid = document.getElementById('speakers-grid');
                speakersGrid.innerHTML = speakers.map(speaker => `
                    <div class="speaker-card ${speaker.role}">
                        ${speaker.is_muted ? '<span class="speaker-muted">üîá</span>' : ''}
                        <div class="speaker-avatar">${speaker.username.charAt(0)}</div>
                        <div class="speaker-name">${speaker.username}</div>
                        <div class="speaker-role">${speaker.role.toUpperCase()}</div>
                        ${isHost && speaker.role === 'speaker' ? `
                            <button class="request-btn deny" style="margin-top: 5px;" onclick="demoteSpeaker(${speaker.user_id})">DEMOTE</button>
                        ` : ''}
                    </div>
                `).join('');

                // Render listeners
                const listeners = net.participants.filter(p => p.role === 'listener');
                document.getElementById('listeners-count').textContent = `LISTENERS: ${listeners.length}`;
                document.getElementById('listeners-list').innerHTML = listeners.map(listener => `
                    <span class="listener-badge">${listener.username}</span>
                `).join('');

                // Render speak requests (for hosts only)
                const requestsPanel = document.getElementById('requests-panel');
                if (isHost && net.pendingRequests?.length > 0) {
                    requestsPanel.classList.remove('hidden');
                    document.getElementById('requests-list').innerHTML = net.pendingRequests.map(req => `
                        <div class="request-item">
                            <span>${req.username} wants to speak</span>
                            <div class="request-actions">
                                <button class="request-btn approve" onclick="approveSpeaker(${req.id}, ${req.user_id})">APPROVE</button>
                                <button class="request-btn deny" onclick="denySpeaker(${req.id})">DENY</button>
                            </div>
                        </div>
                    `).join('');
                } else {
                    requestsPanel.classList.add('hidden');
                }

                // Render controls based on role
                renderNetControls(myRole, myParticipant?.is_muted);

            } catch (err) {
                console.error('Error loading net room:', err);
            }
        }

        // Render net controls based on user role
        function renderNetControls(role, isMuted) {
            const controls = document.getElementById('net-controls');
            let html = '';

            if (role === 'host' || role === 'co-host') {
                html += `
                    <button class="net-control-btn ${isMuted ? 'unmute' : 'mute'}" onclick="toggleMute()">
                        ${isMuted ? 'üé§ UNMUTE' : 'üîá MUTE'}
                    </button>
                    <button class="net-control-btn danger" onclick="endNet()">END_NET</button>
                `;
            } else if (role === 'speaker') {
                html += `
                    <button class="net-control-btn ${isMuted ? 'unmute' : 'mute'}" onclick="toggleMute()">
                        ${isMuted ? 'üé§ UNMUTE' : 'üîá MUTE'}
                    </button>
                `;
            } else {
                html += `
                    <button class="net-control-btn request" onclick="requestToSpeak()">‚úã REQUEST_TO_SPEAK</button>
                `;
            }

            html += `<button class="net-control-btn" onclick="leaveNet()">LEAVE_NET</button>`;
            controls.innerHTML = html;
        }

        // Load net chat messages
        async function loadNetChat() {
            if (!currentNetId) return;

            try {
                const messages = await api(`/api/nets/${currentNetId}/messages`);
                const chatContainer = document.getElementById('net-chat-messages');
                const shouldScroll = chatContainer.scrollTop + chatContainer.clientHeight >= chatContainer.scrollHeight - 50;

                chatContainer.innerHTML = messages.map(msg => {
                    const time = new Date(msg.timestamp);
                    const timeStr = `${String(time.getHours()).padStart(2, '0')}:${String(time.getMinutes()).padStart(2, '0')}`;
                    return `
                        <div class="message" style="margin-bottom: 8px;">
                            <span style="color: #ffaa00;">${msg.username}</span>
                            <span style="color: #666; font-size: 9px;">[${timeStr}]</span>
                            <div>${msg.content}</div>
                        </div>
                    `;
                }).join('');

                if (shouldScroll) {
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }
            } catch (err) {
                console.error('Error loading net chat:', err);
            }
        }

        // Send net chat message
        async function sendNetMessage() {
            if (!currentNetId || !currentUser) return;

            const input = document.getElementById('net-chat-input');
            const content = input.value.trim();
            if (!content) return;

            try {
                await api(`/api/nets/${currentNetId}/messages`, {
                    method: 'POST',
                    body: JSON.stringify({ userId: currentUser.id, content })
                });
                input.value = '';
                await loadNetChat();
            } catch (err) {
                showToast('Error sending message');
            }
        }

        // Toggle mute (for speakers)
        async function toggleMute() {
            if (!currentNetId || !currentUser) return;

            try {
                await api(`/api/nets/${currentNetId}/toggle-mute`, {
                    method: 'POST',
                    body: JSON.stringify({ userId: currentUser.id })
                });
                await loadNetRoom();
            } catch (err) {
                showToast('Error toggling mute');
            }
        }

        // Request to speak
        async function requestToSpeak() {
            if (!currentNetId || !currentUser) return;

            try {
                const result = await api(`/api/nets/${currentNetId}/request-speak`, {
                    method: 'POST',
                    body: JSON.stringify({ userId: currentUser.id })
                });
                showToast(result.message || 'Request sent to host');
            } catch (err) {
                showToast('Error requesting to speak');
            }
        }

        // Approve speaker (host only)
        async function approveSpeaker(requestId, targetUserId) {
            if (!currentNetId || !currentUser) return;

            try {
                await api(`/api/nets/${currentNetId}/approve-speaker`, {
                    method: 'POST',
                    body: JSON.stringify({ userId: currentUser.id, targetUserId, requestId })
                });
                showToast('Speaker approved');
                await loadNetRoom();
            } catch (err) {
                showToast('Error approving speaker');
            }
        }

        // Deny speaker (host only)
        async function denySpeaker(requestId) {
            if (!currentNetId || !currentUser) return;

            try {
                await api(`/api/nets/${currentNetId}/deny-speaker`, {
                    method: 'POST',
                    body: JSON.stringify({ userId: currentUser.id, requestId })
                });
                showToast('Request denied');
                await loadNetRoom();
            } catch (err) {
                showToast('Error denying speaker');
            }
        }

        // Demote speaker back to listener (host only)
        async function demoteSpeaker(targetUserId) {
            if (!currentNetId || !currentUser) return;

            try {
                await api(`/api/nets/${currentNetId}/demote-speaker`, {
                    method: 'POST',
                    body: JSON.stringify({ userId: currentUser.id, targetUserId })
                });
                showToast('Speaker demoted to listener');
                await loadNetRoom();
            } catch (err) {
                showToast('Error demoting speaker');
            }
        }

        // Leave net
        async function leaveNet() {
            if (!currentNetId || !currentUser) return;

            try {
                await api(`/api/nets/${currentNetId}/leave`, {
                    method: 'POST',
                    body: JSON.stringify({ userId: currentUser.id })
                });
                closeNetRoom();
                showToast('Left the net');
                await loadNets();
                await loadNetsInOverview();
            } catch (err) {
                showToast('Error leaving net');
            }
        }

        // End net (host only)
        async function endNet() {
            if (!currentNetId || !currentUser) return;

            if (!confirm('Are you sure you want to end this net? All participants will be disconnected.')) return;

            try {
                await api(`/api/nets/${currentNetId}/end`, {
                    method: 'POST',
                    body: JSON.stringify({ userId: currentUser.id })
                });
                closeNetRoom();
                showToast('Net ended');
                await loadNets();
                await loadNetsInOverview();
            } catch (err) {
                showToast('Error ending net');
            }
        }

        // Close net room popup
        function closeNetRoom() {
            document.getElementById('net-popup').classList.remove('show');
            currentNetId = null;
            currentNetData = null;

            // Clear intervals
            if (netRefreshInterval) {
                clearInterval(netRefreshInterval);
                netRefreshInterval = null;
            }
            if (netChatRefreshInterval) {
                clearInterval(netChatRefreshInterval);
                netChatRefreshInterval = null;
            }
        }

        // Add enter key handler for net chat
        document.addEventListener('DOMContentLoaded', function() {
            const netChatInput = document.getElementById('net-chat-input');
            if (netChatInput) {
                netChatInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendNetMessage();
                    }
                });
            }
        });

        // Verification Flow Functions
        function goToStep(stepNumber) {
            // Hide current step
            document.querySelectorAll('.verification-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show new step
            document.getElementById(`step-${stepNumber}`).classList.add('active');
            currentStep = stepNumber;
            
            // Update progress
            const progress = (stepNumber / 4) * 100;
            document.getElementById('verification-progress').textContent = `STEP ${stepNumber}/4`;
            document.getElementById('progress-fill').style.width = `${progress}%`;
            document.getElementById('progress-fill').textContent = `${progress}%`;
            
            // Special handling for step 3 (face verification)
            if (stepNumber === 3) {
                setTimeout(() => {
                    document.getElementById('start-face-capture').classList.remove('hidden');
                }, 500);
            }
        }

        // DD-214 Upload Handler
        function handleDD214Upload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            document.getElementById('dd214-upload-zone').classList.add('has-file');
            document.getElementById('dd214-status').classList.remove('hidden');
            
            // Simulate OCR processing
            setTimeout(() => {
                document.getElementById('dd214-file-status').textContent = 'COMPLETE';
                document.getElementById('dd214-file-status').className = 'status-success';
                
                setTimeout(() => {
                    document.getElementById('dd214-ocr-status').textContent = 'EXTRACTING...';
                    document.getElementById('dd214-ocr-status').className = 'status-pending';
                    
                    setTimeout(() => {
                        document.getElementById('dd214-ocr-status').textContent = 'COMPLETE';
                        document.getElementById('dd214-ocr-status').className = 'status-success';
                        
                        // Mock extracted data
                        verificationData.rank = 'O-3';
                        verificationData.name = 'JAMES MARTINEZ';
                        verificationData.badges = ['AIRBORNE', 'RANGER', 'CIB'];
                        verificationData.units = ['82ND_AIRBORNE'];
                        
                        document.getElementById('dd214-rank-status').textContent = 'O-3 CAPTAIN (OFFICER)';
                        document.getElementById('dd214-rank-status').className = 'status-success';
                        
                        setTimeout(() => {
                            document.getElementById('dd214-discharge-status').textContent = 'HONORABLE';
                            document.getElementById('dd214-discharge-status').className = 'status-success';
                            
                            document.getElementById('step-1-continue').classList.remove('hidden');
                        }, 800);
                    }, 1500);
                }, 800);
            }, 1000);
        }

        // Driver's License Upload Handler
        function handleDLUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            document.getElementById('dl-upload-zone').classList.add('has-file');
            document.getElementById('dl-status').classList.remove('hidden');
            
            // Simulate processing
            setTimeout(() => {
                document.getElementById('dl-file-status').textContent = 'COMPLETE';
                document.getElementById('dl-file-status').className = 'status-success';
                
                setTimeout(() => {
                    document.getElementById('dl-name-status').textContent = 'EXTRACTING...';
                    document.getElementById('dl-name-status').className = 'status-pending';
                    
                    setTimeout(() => {
                        document.getElementById('dl-name-status').textContent = 'JAMES R MARTINEZ';
                        document.getElementById('dl-name-status').className = 'status-success';
                        
                        setTimeout(() => {
                            document.getElementById('dl-match-status').textContent = 'VERIFIED (98% MATCH)';
                            document.getElementById('dl-match-status').className = 'status-success';
                            
                            setTimeout(() => {
                                document.getElementById('dl-photo-status').textContent = 'COMPLETE';
                                document.getElementById('dl-photo-status').className = 'status-success';
                                
                                document.getElementById('step-2-continue').classList.remove('hidden');
                            }, 800);
                        }, 1000);
                    }, 1500);
                }, 800);
            }, 1000);
        }

        // Face Verification
        async function startFaceVerification() {
            document.getElementById('start-face-capture').classList.add('hidden');
            document.getElementById('face-status').classList.remove('hidden');
            
            try {
                // Request camera access
                webcamStream = await navigator.mediaDevices.getUserMedia({ video: true });
                document.getElementById('webcam-video').srcObject = webcamStream;
                
                document.getElementById('face-camera-status').textContent = 'GRANTED';
                document.getElementById('face-camera-status').className = 'status-success';
                document.getElementById('liveness-instructions').textContent = 'POSITION YOUR FACE IN THE CENTER...';
                document.getElementById('liveness-instructions').style.color = '#ffaa00';
                
                // Simulate face detection
                setTimeout(() => {
                    document.getElementById('face-detect-status').textContent = 'FACE DETECTED';
                    document.getElementById('face-detect-status').className = 'status-success';
                    document.getElementById('liveness-instructions').textContent = 'PLEASE BLINK...';
                    
                    setTimeout(() => {
                        document.getElementById('face-liveness-status').textContent = 'BLINK DETECTED';
                        document.getElementById('face-liveness-status').className = 'status-success';
                        document.getElementById('liveness-instructions').textContent = 'TURN YOUR HEAD LEFT...';
                        
                        setTimeout(() => {
                            document.getElementById('liveness-instructions').textContent = 'TURN YOUR HEAD RIGHT...';
                            
                            setTimeout(() => {
                                document.getElementById('face-liveness-status').textContent = 'LIVENESS VERIFIED';
                                document.getElementById('liveness-instructions').textContent = 'COMPARING WITH DRIVER\'S LICENSE...';
                                
                                setTimeout(() => {
                                    document.getElementById('face-match-status').textContent = 'MATCH CONFIRMED (94%)';
                                    document.getElementById('face-match-status').className = 'status-success';
                                    document.getElementById('liveness-instructions').textContent = 'VERIFICATION COMPLETE!';
                                    document.getElementById('liveness-instructions').style.color = '#00ff41';
                                    
                                    // Stop webcam
                                    if (webcamStream) {
                                        webcamStream.getTracks().forEach(track => track.stop());
                                    }
                                    
                                    document.getElementById('step-3-continue').classList.remove('hidden');
                                }, 2000);
                            }, 1500);
                        }, 1500);
                    }, 2000);
                }, 2000);
                
            } catch (error) {
                document.getElementById('face-camera-status').textContent = 'DENIED';
                document.getElementById('face-camera-status').className = 'status-error';
                document.getElementById('liveness-instructions').textContent = 'CAMERA ACCESS REQUIRED';
                document.getElementById('liveness-instructions').style.color = '#ff0000';
            }
        }

        // Complete Verification
        function completeVerification() {
            // Update final display
            document.getElementById('final-rank').textContent = verificationData.rank + ' CAPTAIN';
            document.getElementById('final-badges').textContent = verificationData.badges.join(', ');
            document.getElementById('final-units').textContent = verificationData.units.join(', ');
            
            // Transition to main app
            setTimeout(() => {
                document.getElementById('verification-screen').classList.add('hidden');
                document.getElementById('main-app').classList.add('active');
                
                // Update profile with verified data
                document.getElementById('profile-rank').textContent = verificationData.rank + ' CAPTAIN';
                document.getElementById('profile-unit').textContent = verificationData.units[0].replace('_', ' ');
                document.getElementById('user-leaderboard-unit').textContent = verificationData.units[0];
                
                // Update badges
                const badgesHtml = verificationData.badges.map(badge => 
                    `<div class="badge">${badge}</div>`
                ).join('');
                document.getElementById('profile-badges').innerHTML = badgesHtml;
            }, 1000);
        }

        // Main App Functions
        function showSection(sectionName) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));

            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            document.getElementById(sectionName).classList.add('active');
            event.target.classList.add('active');
        }

        function showProfile() {
            document.getElementById('profile-popup').classList.add('show');
        }

        function closeProfile(event) {
            if (!event || event.target.id === 'profile-popup' || event.target.classList.contains('profile-close')) {
                document.getElementById('profile-popup').classList.remove('show');
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const messageInput = document.getElementById('message-input');
            if (messageInput) {
                messageInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });
            }
        });

        setInterval(function() {
            const now = new Date();
            const timeStr = now.toISOString().substr(8, 2) + 'AUG25_' +
                           now.toISOString().substr(11, 2) +
                           now.toISOString().substr(14, 2) + 'Z';

            const systemInfo = document.querySelector('.system-info');
            if (systemInfo) {
                systemInfo.innerHTML = `SYSTEM_STATUS: OPERATIONAL | PING: ${Math.floor(Math.random() * 30 + 20)}ms | LAST_SYNC: ${timeStr}`;
            }
        }, 30000);
    </script>
</body>
</html>
